{
  "version": 3,
  "sources": ["../../../../../node_modules/dexie/dist/modern/dexie.mjs"],
  "sourcesContent": ["/*\r\n * Dexie.js - a minimalistic wrapper for IndexedDB\r\n * ===============================================\r\n *\r\n * By David Fahlander, david.fahlander@gmail.com\r\n *\r\n * Version 3.2.7, Wed Mar 20 2024\r\n *\r\n * https://dexie.org\r\n *\r\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\r\n */\r\n \r\nconst _global = typeof globalThis !== 'undefined' ? globalThis :\r\n    typeof self !== 'undefined' ? self :\r\n        typeof window !== 'undefined' ? window :\r\n            global;\r\n\r\nconst keys = Object.keys;\r\nconst isArray = Array.isArray;\r\nif (typeof Promise !== 'undefined' && !_global.Promise) {\r\n    _global.Promise = Promise;\r\n}\r\nfunction extend(obj, extension) {\r\n    if (typeof extension !== 'object')\r\n        return obj;\r\n    keys(extension).forEach(function (key) {\r\n        obj[key] = extension[key];\r\n    });\r\n    return obj;\r\n}\r\nconst getProto = Object.getPrototypeOf;\r\nconst _hasOwn = {}.hasOwnProperty;\r\nfunction hasOwn(obj, prop) {\r\n    return _hasOwn.call(obj, prop);\r\n}\r\nfunction props(proto, extension) {\r\n    if (typeof extension === 'function')\r\n        extension = extension(getProto(proto));\r\n    (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(key => {\r\n        setProp(proto, key, extension[key]);\r\n    });\r\n}\r\nconst defineProperty = Object.defineProperty;\r\nfunction setProp(obj, prop, functionOrGetSet, options) {\r\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\r\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\r\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\r\n}\r\nfunction derive(Child) {\r\n    return {\r\n        from: function (Parent) {\r\n            Child.prototype = Object.create(Parent.prototype);\r\n            setProp(Child.prototype, \"constructor\", Child);\r\n            return {\r\n                extend: props.bind(null, Child.prototype)\r\n            };\r\n        }\r\n    };\r\n}\r\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\r\nfunction getPropertyDescriptor(obj, prop) {\r\n    const pd = getOwnPropertyDescriptor(obj, prop);\r\n    let proto;\r\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\r\n}\r\nconst _slice = [].slice;\r\nfunction slice(args, start, end) {\r\n    return _slice.call(args, start, end);\r\n}\r\nfunction override(origFunc, overridedFactory) {\r\n    return overridedFactory(origFunc);\r\n}\r\nfunction assert(b) {\r\n    if (!b)\r\n        throw new Error(\"Assertion Failed\");\r\n}\r\nfunction asap$1(fn) {\r\n    if (_global.setImmediate)\r\n        setImmediate(fn);\r\n    else\r\n        setTimeout(fn, 0);\r\n}\r\nfunction arrayToObject(array, extractor) {\r\n    return array.reduce((result, item, i) => {\r\n        var nameAndValue = extractor(item, i);\r\n        if (nameAndValue)\r\n            result[nameAndValue[0]] = nameAndValue[1];\r\n        return result;\r\n    }, {});\r\n}\r\nfunction tryCatch(fn, onerror, args) {\r\n    try {\r\n        fn.apply(null, args);\r\n    }\r\n    catch (ex) {\r\n        onerror && onerror(ex);\r\n    }\r\n}\r\nfunction getByKeyPath(obj, keyPath) {\r\n    if (typeof keyPath === 'string' && hasOwn(obj, keyPath))\r\n        return obj[keyPath];\r\n    if (!keyPath)\r\n        return obj;\r\n    if (typeof keyPath !== 'string') {\r\n        var rv = [];\r\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\r\n            var val = getByKeyPath(obj, keyPath[i]);\r\n            rv.push(val);\r\n        }\r\n        return rv;\r\n    }\r\n    var period = keyPath.indexOf('.');\r\n    if (period !== -1) {\r\n        var innerObj = obj[keyPath.substr(0, period)];\r\n        return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\r\n    }\r\n    return undefined;\r\n}\r\nfunction setByKeyPath(obj, keyPath, value) {\r\n    if (!obj || keyPath === undefined)\r\n        return;\r\n    if ('isFrozen' in Object && Object.isFrozen(obj))\r\n        return;\r\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\r\n        assert(typeof value !== 'string' && 'length' in value);\r\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\r\n            setByKeyPath(obj, keyPath[i], value[i]);\r\n        }\r\n    }\r\n    else {\r\n        var period = keyPath.indexOf('.');\r\n        if (period !== -1) {\r\n            var currentKeyPath = keyPath.substr(0, period);\r\n            var remainingKeyPath = keyPath.substr(period + 1);\r\n            if (remainingKeyPath === \"\")\r\n                if (value === undefined) {\r\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\r\n                        obj.splice(currentKeyPath, 1);\r\n                    else\r\n                        delete obj[currentKeyPath];\r\n                }\r\n                else\r\n                    obj[currentKeyPath] = value;\r\n            else {\r\n                var innerObj = obj[currentKeyPath];\r\n                if (!innerObj || !hasOwn(obj, currentKeyPath))\r\n                    innerObj = (obj[currentKeyPath] = {});\r\n                setByKeyPath(innerObj, remainingKeyPath, value);\r\n            }\r\n        }\r\n        else {\r\n            if (value === undefined) {\r\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\r\n                    obj.splice(keyPath, 1);\r\n                else\r\n                    delete obj[keyPath];\r\n            }\r\n            else\r\n                obj[keyPath] = value;\r\n        }\r\n    }\r\n}\r\nfunction delByKeyPath(obj, keyPath) {\r\n    if (typeof keyPath === 'string')\r\n        setByKeyPath(obj, keyPath, undefined);\r\n    else if ('length' in keyPath)\r\n        [].map.call(keyPath, function (kp) {\r\n            setByKeyPath(obj, kp, undefined);\r\n        });\r\n}\r\nfunction shallowClone(obj) {\r\n    var rv = {};\r\n    for (var m in obj) {\r\n        if (hasOwn(obj, m))\r\n            rv[m] = obj[m];\r\n    }\r\n    return rv;\r\n}\r\nconst concat = [].concat;\r\nfunction flatten(a) {\r\n    return concat.apply([], a);\r\n}\r\nconst intrinsicTypeNames = \"BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\r\n    .split(',').concat(flatten([8, 16, 32, 64].map(num => [\"Int\", \"Uint\", \"Float\"].map(t => t + num + \"Array\")))).filter(t => _global[t]);\r\nconst intrinsicTypes = intrinsicTypeNames.map(t => _global[t]);\r\narrayToObject(intrinsicTypeNames, x => [x, true]);\r\nlet circularRefs = null;\r\nfunction deepClone(any) {\r\n    circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\r\n    const rv = innerDeepClone(any);\r\n    circularRefs = null;\r\n    return rv;\r\n}\r\nfunction innerDeepClone(any) {\r\n    if (!any || typeof any !== 'object')\r\n        return any;\r\n    let rv = circularRefs && circularRefs.get(any);\r\n    if (rv)\r\n        return rv;\r\n    if (isArray(any)) {\r\n        rv = [];\r\n        circularRefs && circularRefs.set(any, rv);\r\n        for (var i = 0, l = any.length; i < l; ++i) {\r\n            rv.push(innerDeepClone(any[i]));\r\n        }\r\n    }\r\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\r\n        rv = any;\r\n    }\r\n    else {\r\n        const proto = getProto(any);\r\n        rv = proto === Object.prototype ? {} : Object.create(proto);\r\n        circularRefs && circularRefs.set(any, rv);\r\n        for (var prop in any) {\r\n            if (hasOwn(any, prop)) {\r\n                rv[prop] = innerDeepClone(any[prop]);\r\n            }\r\n        }\r\n    }\r\n    return rv;\r\n}\r\nconst { toString } = {};\r\nfunction toStringTag(o) {\r\n    return toString.call(o).slice(8, -1);\r\n}\r\nconst iteratorSymbol = typeof Symbol !== 'undefined' ?\r\n    Symbol.iterator :\r\n    '@@iterator';\r\nconst getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\r\n    var i;\r\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\r\n} : function () { return null; };\r\nconst NO_CHAR_ARRAY = {};\r\nfunction getArrayOf(arrayLike) {\r\n    var i, a, x, it;\r\n    if (arguments.length === 1) {\r\n        if (isArray(arrayLike))\r\n            return arrayLike.slice();\r\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\r\n            return [arrayLike];\r\n        if ((it = getIteratorOf(arrayLike))) {\r\n            a = [];\r\n            while ((x = it.next()), !x.done)\r\n                a.push(x.value);\r\n            return a;\r\n        }\r\n        if (arrayLike == null)\r\n            return [arrayLike];\r\n        i = arrayLike.length;\r\n        if (typeof i === 'number') {\r\n            a = new Array(i);\r\n            while (i--)\r\n                a[i] = arrayLike[i];\r\n            return a;\r\n        }\r\n        return [arrayLike];\r\n    }\r\n    i = arguments.length;\r\n    a = new Array(i);\r\n    while (i--)\r\n        a[i] = arguments[i];\r\n    return a;\r\n}\r\nconst isAsyncFunction = typeof Symbol !== 'undefined'\r\n    ? (fn) => fn[Symbol.toStringTag] === 'AsyncFunction'\r\n    : () => false;\r\n\r\nvar debug = typeof location !== 'undefined' &&\r\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\r\nfunction setDebug(value, filter) {\r\n    debug = value;\r\n    libraryFilter = filter;\r\n}\r\nvar libraryFilter = () => true;\r\nconst NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\r\nfunction getErrorWithStack() {\r\n    if (NEEDS_THROW_FOR_STACK)\r\n        try {\r\n            getErrorWithStack.arguments;\r\n            throw new Error();\r\n        }\r\n        catch (e) {\r\n            return e;\r\n        }\r\n    return new Error();\r\n}\r\nfunction prettyStack(exception, numIgnoredFrames) {\r\n    var stack = exception.stack;\r\n    if (!stack)\r\n        return \"\";\r\n    numIgnoredFrames = (numIgnoredFrames || 0);\r\n    if (stack.indexOf(exception.name) === 0)\r\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\r\n    return stack.split('\\n')\r\n        .slice(numIgnoredFrames)\r\n        .filter(libraryFilter)\r\n        .map(frame => \"\\n\" + frame)\r\n        .join('');\r\n}\r\n\r\nvar dexieErrorNames = [\r\n    'Modify',\r\n    'Bulk',\r\n    'OpenFailed',\r\n    'VersionChange',\r\n    'Schema',\r\n    'Upgrade',\r\n    'InvalidTable',\r\n    'MissingAPI',\r\n    'NoSuchDatabase',\r\n    'InvalidArgument',\r\n    'SubTransaction',\r\n    'Unsupported',\r\n    'Internal',\r\n    'DatabaseClosed',\r\n    'PrematureCommit',\r\n    'ForeignAwait'\r\n];\r\nvar idbDomErrorNames = [\r\n    'Unknown',\r\n    'Constraint',\r\n    'Data',\r\n    'TransactionInactive',\r\n    'ReadOnly',\r\n    'Version',\r\n    'NotFound',\r\n    'InvalidState',\r\n    'InvalidAccess',\r\n    'Abort',\r\n    'Timeout',\r\n    'QuotaExceeded',\r\n    'Syntax',\r\n    'DataClone'\r\n];\r\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\r\nvar defaultTexts = {\r\n    VersionChanged: \"Database version changed by other database connection\",\r\n    DatabaseClosed: \"Database has been closed\",\r\n    Abort: \"Transaction aborted\",\r\n    TransactionInactive: \"Transaction has already completed or failed\",\r\n    MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\r\n};\r\nfunction DexieError(name, msg) {\r\n    this._e = getErrorWithStack();\r\n    this.name = name;\r\n    this.message = msg;\r\n}\r\nderive(DexieError).from(Error).extend({\r\n    stack: {\r\n        get: function () {\r\n            return this._stack ||\r\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\r\n        }\r\n    },\r\n    toString: function () { return this.name + \": \" + this.message; }\r\n});\r\nfunction getMultiErrorMessage(msg, failures) {\r\n    return msg + \". Errors: \" + Object.keys(failures)\r\n        .map(key => failures[key].toString())\r\n        .filter((v, i, s) => s.indexOf(v) === i)\r\n        .join('\\n');\r\n}\r\nfunction ModifyError(msg, failures, successCount, failedKeys) {\r\n    this._e = getErrorWithStack();\r\n    this.failures = failures;\r\n    this.failedKeys = failedKeys;\r\n    this.successCount = successCount;\r\n    this.message = getMultiErrorMessage(msg, failures);\r\n}\r\nderive(ModifyError).from(DexieError);\r\nfunction BulkError(msg, failures) {\r\n    this._e = getErrorWithStack();\r\n    this.name = \"BulkError\";\r\n    this.failures = Object.keys(failures).map(pos => failures[pos]);\r\n    this.failuresByPos = failures;\r\n    this.message = getMultiErrorMessage(msg, failures);\r\n}\r\nderive(BulkError).from(DexieError);\r\nvar errnames = errorList.reduce((obj, name) => (obj[name] = name + \"Error\", obj), {});\r\nconst BaseException = DexieError;\r\nvar exceptions = errorList.reduce((obj, name) => {\r\n    var fullName = name + \"Error\";\r\n    function DexieError(msgOrInner, inner) {\r\n        this._e = getErrorWithStack();\r\n        this.name = fullName;\r\n        if (!msgOrInner) {\r\n            this.message = defaultTexts[name] || fullName;\r\n            this.inner = null;\r\n        }\r\n        else if (typeof msgOrInner === 'string') {\r\n            this.message = `${msgOrInner}${!inner ? '' : '\\n ' + inner}`;\r\n            this.inner = inner || null;\r\n        }\r\n        else if (typeof msgOrInner === 'object') {\r\n            this.message = `${msgOrInner.name} ${msgOrInner.message}`;\r\n            this.inner = msgOrInner;\r\n        }\r\n    }\r\n    derive(DexieError).from(BaseException);\r\n    obj[name] = DexieError;\r\n    return obj;\r\n}, {});\r\nexceptions.Syntax = SyntaxError;\r\nexceptions.Type = TypeError;\r\nexceptions.Range = RangeError;\r\nvar exceptionMap = idbDomErrorNames.reduce((obj, name) => {\r\n    obj[name + \"Error\"] = exceptions[name];\r\n    return obj;\r\n}, {});\r\nfunction mapError(domError, message) {\r\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\r\n        return domError;\r\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\r\n    if (\"stack\" in domError) {\r\n        setProp(rv, \"stack\", { get: function () {\r\n                return this.inner.stack;\r\n            } });\r\n    }\r\n    return rv;\r\n}\r\nvar fullNameExceptions = errorList.reduce((obj, name) => {\r\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\r\n        obj[name + \"Error\"] = exceptions[name];\r\n    return obj;\r\n}, {});\r\nfullNameExceptions.ModifyError = ModifyError;\r\nfullNameExceptions.DexieError = DexieError;\r\nfullNameExceptions.BulkError = BulkError;\r\n\r\nfunction nop() { }\r\nfunction mirror(val) { return val; }\r\nfunction pureFunctionChain(f1, f2) {\r\n    if (f1 == null || f1 === mirror)\r\n        return f2;\r\n    return function (val) {\r\n        return f2(f1(val));\r\n    };\r\n}\r\nfunction callBoth(on1, on2) {\r\n    return function () {\r\n        on1.apply(this, arguments);\r\n        on2.apply(this, arguments);\r\n    };\r\n}\r\nfunction hookCreatingChain(f1, f2) {\r\n    if (f1 === nop)\r\n        return f2;\r\n    return function () {\r\n        var res = f1.apply(this, arguments);\r\n        if (res !== undefined)\r\n            arguments[0] = res;\r\n        var onsuccess = this.onsuccess,\r\n        onerror = this.onerror;\r\n        this.onsuccess = null;\r\n        this.onerror = null;\r\n        var res2 = f2.apply(this, arguments);\r\n        if (onsuccess)\r\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\r\n        if (onerror)\r\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\r\n        return res2 !== undefined ? res2 : res;\r\n    };\r\n}\r\nfunction hookDeletingChain(f1, f2) {\r\n    if (f1 === nop)\r\n        return f2;\r\n    return function () {\r\n        f1.apply(this, arguments);\r\n        var onsuccess = this.onsuccess,\r\n        onerror = this.onerror;\r\n        this.onsuccess = this.onerror = null;\r\n        f2.apply(this, arguments);\r\n        if (onsuccess)\r\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\r\n        if (onerror)\r\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\r\n    };\r\n}\r\nfunction hookUpdatingChain(f1, f2) {\r\n    if (f1 === nop)\r\n        return f2;\r\n    return function (modifications) {\r\n        var res = f1.apply(this, arguments);\r\n        extend(modifications, res);\r\n        var onsuccess = this.onsuccess,\r\n        onerror = this.onerror;\r\n        this.onsuccess = null;\r\n        this.onerror = null;\r\n        var res2 = f2.apply(this, arguments);\r\n        if (onsuccess)\r\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\r\n        if (onerror)\r\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\r\n        return res === undefined ?\r\n            (res2 === undefined ? undefined : res2) :\r\n            (extend(res, res2));\r\n    };\r\n}\r\nfunction reverseStoppableEventChain(f1, f2) {\r\n    if (f1 === nop)\r\n        return f2;\r\n    return function () {\r\n        if (f2.apply(this, arguments) === false)\r\n            return false;\r\n        return f1.apply(this, arguments);\r\n    };\r\n}\r\nfunction promisableChain(f1, f2) {\r\n    if (f1 === nop)\r\n        return f2;\r\n    return function () {\r\n        var res = f1.apply(this, arguments);\r\n        if (res && typeof res.then === 'function') {\r\n            var thiz = this, i = arguments.length, args = new Array(i);\r\n            while (i--)\r\n                args[i] = arguments[i];\r\n            return res.then(function () {\r\n                return f2.apply(thiz, args);\r\n            });\r\n        }\r\n        return f2.apply(this, arguments);\r\n    };\r\n}\r\n\r\nvar INTERNAL = {};\r\nconst LONG_STACKS_CLIP_LIMIT = 100,\r\nMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, [resolvedNativePromise, nativePromiseProto, resolvedGlobalPromise] = typeof Promise === 'undefined' ?\r\n    [] :\r\n    (() => {\r\n        let globalP = Promise.resolve();\r\n        if (typeof crypto === 'undefined' || !crypto.subtle)\r\n            return [globalP, getProto(globalP), globalP];\r\n        const nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\r\n        return [\r\n            nativeP,\r\n            getProto(nativeP),\r\n            globalP\r\n        ];\r\n    })(), nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\r\nconst NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\r\nconst patchGlobalPromise = !!resolvedGlobalPromise;\r\nvar stack_being_generated = false;\r\nvar schedulePhysicalTick = resolvedGlobalPromise ?\r\n    () => { resolvedGlobalPromise.then(physicalTick); }\r\n    :\r\n        _global.setImmediate ?\r\n            setImmediate.bind(null, physicalTick) :\r\n            _global.MutationObserver ?\r\n                () => {\r\n                    var hiddenDiv = document.createElement(\"div\");\r\n                    (new MutationObserver(() => {\r\n                        physicalTick();\r\n                        hiddenDiv = null;\r\n                    })).observe(hiddenDiv, { attributes: true });\r\n                    hiddenDiv.setAttribute('i', '1');\r\n                } :\r\n                () => { setTimeout(physicalTick, 0); };\r\nvar asap = function (callback, args) {\r\n    microtickQueue.push([callback, args]);\r\n    if (needsNewPhysicalTick) {\r\n        schedulePhysicalTick();\r\n        needsNewPhysicalTick = false;\r\n    }\r\n};\r\nvar isOutsideMicroTick = true,\r\nneedsNewPhysicalTick = true,\r\nunhandledErrors = [],\r\nrejectingErrors = [],\r\ncurrentFulfiller = null, rejectionMapper = mirror;\r\nvar globalPSD = {\r\n    id: 'global',\r\n    global: true,\r\n    ref: 0,\r\n    unhandleds: [],\r\n    onunhandled: globalError,\r\n    pgp: false,\r\n    env: {},\r\n    finalize: function () {\r\n        this.unhandleds.forEach(uh => {\r\n            try {\r\n                globalError(uh[0], uh[1]);\r\n            }\r\n            catch (e) { }\r\n        });\r\n    }\r\n};\r\nvar PSD = globalPSD;\r\nvar microtickQueue = [];\r\nvar numScheduledCalls = 0;\r\nvar tickFinalizers = [];\r\nfunction DexiePromise(fn) {\r\n    if (typeof this !== 'object')\r\n        throw new TypeError('Promises must be constructed via new');\r\n    this._listeners = [];\r\n    this.onuncatched = nop;\r\n    this._lib = false;\r\n    var psd = (this._PSD = PSD);\r\n    if (debug) {\r\n        this._stackHolder = getErrorWithStack();\r\n        this._prev = null;\r\n        this._numPrev = 0;\r\n    }\r\n    if (typeof fn !== 'function') {\r\n        if (fn !== INTERNAL)\r\n            throw new TypeError('Not a function');\r\n        this._state = arguments[1];\r\n        this._value = arguments[2];\r\n        if (this._state === false)\r\n            handleRejection(this, this._value);\r\n        return;\r\n    }\r\n    this._state = null;\r\n    this._value = null;\r\n    ++psd.ref;\r\n    executePromiseTask(this, fn);\r\n}\r\nconst thenProp = {\r\n    get: function () {\r\n        var psd = PSD, microTaskId = totalEchoes;\r\n        function then(onFulfilled, onRejected) {\r\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\r\n            const cleanup = possibleAwait && !decrementExpectedAwaits();\r\n            var rv = new DexiePromise((resolve, reject) => {\r\n                propagateToListener(this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\r\n            });\r\n            debug && linkToPreviousPromise(rv, this);\r\n            return rv;\r\n        }\r\n        then.prototype = INTERNAL;\r\n        return then;\r\n    },\r\n    set: function (value) {\r\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\r\n            thenProp :\r\n            {\r\n                get: function () {\r\n                    return value;\r\n                },\r\n                set: thenProp.set\r\n            });\r\n    }\r\n};\r\nprops(DexiePromise.prototype, {\r\n    then: thenProp,\r\n    _then: function (onFulfilled, onRejected) {\r\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\r\n    },\r\n    catch: function (onRejected) {\r\n        if (arguments.length === 1)\r\n            return this.then(null, onRejected);\r\n        var type = arguments[0], handler = arguments[1];\r\n        return typeof type === 'function' ? this.then(null, err =>\r\n        err instanceof type ? handler(err) : PromiseReject(err))\r\n            : this.then(null, err =>\r\n            err && err.name === type ? handler(err) : PromiseReject(err));\r\n    },\r\n    finally: function (onFinally) {\r\n        return this.then(value => {\r\n            onFinally();\r\n            return value;\r\n        }, err => {\r\n            onFinally();\r\n            return PromiseReject(err);\r\n        });\r\n    },\r\n    stack: {\r\n        get: function () {\r\n            if (this._stack)\r\n                return this._stack;\r\n            try {\r\n                stack_being_generated = true;\r\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\r\n                var stack = stacks.join(\"\\nFrom previous: \");\r\n                if (this._state !== null)\r\n                    this._stack = stack;\r\n                return stack;\r\n            }\r\n            finally {\r\n                stack_being_generated = false;\r\n            }\r\n        }\r\n    },\r\n    timeout: function (ms, msg) {\r\n        return ms < Infinity ?\r\n            new DexiePromise((resolve, reject) => {\r\n                var handle = setTimeout(() => reject(new exceptions.Timeout(msg)), ms);\r\n                this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\r\n            }) : this;\r\n    }\r\n});\r\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\r\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\r\nglobalPSD.env = snapShot();\r\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\r\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n    this.resolve = resolve;\r\n    this.reject = reject;\r\n    this.psd = zone;\r\n}\r\nprops(DexiePromise, {\r\n    all: function () {\r\n        var values = getArrayOf.apply(null, arguments)\r\n            .map(onPossibleParallellAsync);\r\n        return new DexiePromise(function (resolve, reject) {\r\n            if (values.length === 0)\r\n                resolve([]);\r\n            var remaining = values.length;\r\n            values.forEach((a, i) => DexiePromise.resolve(a).then(x => {\r\n                values[i] = x;\r\n                if (!--remaining)\r\n                    resolve(values);\r\n            }, reject));\r\n        });\r\n    },\r\n    resolve: value => {\r\n        if (value instanceof DexiePromise)\r\n            return value;\r\n        if (value && typeof value.then === 'function')\r\n            return new DexiePromise((resolve, reject) => {\r\n                value.then(resolve, reject);\r\n            });\r\n        var rv = new DexiePromise(INTERNAL, true, value);\r\n        linkToPreviousPromise(rv, currentFulfiller);\r\n        return rv;\r\n    },\r\n    reject: PromiseReject,\r\n    race: function () {\r\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\r\n        return new DexiePromise((resolve, reject) => {\r\n            values.map(value => DexiePromise.resolve(value).then(resolve, reject));\r\n        });\r\n    },\r\n    PSD: {\r\n        get: () => PSD,\r\n        set: value => PSD = value\r\n    },\r\n    totalEchoes: { get: () => totalEchoes },\r\n    newPSD: newScope,\r\n    usePSD: usePSD,\r\n    scheduler: {\r\n        get: () => asap,\r\n        set: value => { asap = value; }\r\n    },\r\n    rejectionMapper: {\r\n        get: () => rejectionMapper,\r\n        set: value => { rejectionMapper = value; }\r\n    },\r\n    follow: (fn, zoneProps) => {\r\n        return new DexiePromise((resolve, reject) => {\r\n            return newScope((resolve, reject) => {\r\n                var psd = PSD;\r\n                psd.unhandleds = [];\r\n                psd.onunhandled = reject;\r\n                psd.finalize = callBoth(function () {\r\n                    run_at_end_of_this_or_next_physical_tick(() => {\r\n                        this.unhandleds.length === 0 ? resolve() : reject(this.unhandleds[0]);\r\n                    });\r\n                }, psd.finalize);\r\n                fn();\r\n            }, zoneProps, resolve, reject);\r\n        });\r\n    }\r\n});\r\nif (NativePromise) {\r\n    if (NativePromise.allSettled)\r\n        setProp(DexiePromise, \"allSettled\", function () {\r\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\r\n            return new DexiePromise(resolve => {\r\n                if (possiblePromises.length === 0)\r\n                    resolve([]);\r\n                let remaining = possiblePromises.length;\r\n                const results = new Array(remaining);\r\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => results[i] = { status: \"fulfilled\", value }, reason => results[i] = { status: \"rejected\", reason })\r\n                    .then(() => --remaining || resolve(results)));\r\n            });\r\n        });\r\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\r\n        setProp(DexiePromise, \"any\", function () {\r\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\r\n            return new DexiePromise((resolve, reject) => {\r\n                if (possiblePromises.length === 0)\r\n                    reject(new AggregateError([]));\r\n                let remaining = possiblePromises.length;\r\n                const failures = new Array(remaining);\r\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => resolve(value), failure => {\r\n                    failures[i] = failure;\r\n                    if (!--remaining)\r\n                        reject(new AggregateError(failures));\r\n                }));\r\n            });\r\n        });\r\n}\r\nfunction executePromiseTask(promise, fn) {\r\n    try {\r\n        fn(value => {\r\n            if (promise._state !== null)\r\n                return;\r\n            if (value === promise)\r\n                throw new TypeError('A promise cannot be resolved with itself.');\r\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\r\n            if (value && typeof value.then === 'function') {\r\n                executePromiseTask(promise, (resolve, reject) => {\r\n                    value instanceof DexiePromise ?\r\n                        value._then(resolve, reject) :\r\n                        value.then(resolve, reject);\r\n                });\r\n            }\r\n            else {\r\n                promise._state = true;\r\n                promise._value = value;\r\n                propagateAllListeners(promise);\r\n            }\r\n            if (shouldExecuteTick)\r\n                endMicroTickScope();\r\n        }, handleRejection.bind(null, promise));\r\n    }\r\n    catch (ex) {\r\n        handleRejection(promise, ex);\r\n    }\r\n}\r\nfunction handleRejection(promise, reason) {\r\n    rejectingErrors.push(reason);\r\n    if (promise._state !== null)\r\n        return;\r\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\r\n    reason = rejectionMapper(reason);\r\n    promise._state = false;\r\n    promise._value = reason;\r\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(() => {\r\n        var origProp = getPropertyDescriptor(reason, \"stack\");\r\n        reason._promise = promise;\r\n        setProp(reason, \"stack\", {\r\n            get: () => stack_being_generated ?\r\n                origProp && (origProp.get ?\r\n                    origProp.get.apply(reason) :\r\n                    origProp.value) :\r\n                promise.stack\r\n        });\r\n    });\r\n    addPossiblyUnhandledError(promise);\r\n    propagateAllListeners(promise);\r\n    if (shouldExecuteTick)\r\n        endMicroTickScope();\r\n}\r\nfunction propagateAllListeners(promise) {\r\n    var listeners = promise._listeners;\r\n    promise._listeners = [];\r\n    for (var i = 0, len = listeners.length; i < len; ++i) {\r\n        propagateToListener(promise, listeners[i]);\r\n    }\r\n    var psd = promise._PSD;\r\n    --psd.ref || psd.finalize();\r\n    if (numScheduledCalls === 0) {\r\n        ++numScheduledCalls;\r\n        asap(() => {\r\n            if (--numScheduledCalls === 0)\r\n                finalizePhysicalTick();\r\n        }, []);\r\n    }\r\n}\r\nfunction propagateToListener(promise, listener) {\r\n    if (promise._state === null) {\r\n        promise._listeners.push(listener);\r\n        return;\r\n    }\r\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\r\n    if (cb === null) {\r\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\r\n    }\r\n    ++listener.psd.ref;\r\n    ++numScheduledCalls;\r\n    asap(callListener, [cb, promise, listener]);\r\n}\r\nfunction callListener(cb, promise, listener) {\r\n    try {\r\n        currentFulfiller = promise;\r\n        var ret, value = promise._value;\r\n        if (promise._state) {\r\n            ret = cb(value);\r\n        }\r\n        else {\r\n            if (rejectingErrors.length)\r\n                rejectingErrors = [];\r\n            ret = cb(value);\r\n            if (rejectingErrors.indexOf(value) === -1)\r\n                markErrorAsHandled(promise);\r\n        }\r\n        listener.resolve(ret);\r\n    }\r\n    catch (e) {\r\n        listener.reject(e);\r\n    }\r\n    finally {\r\n        currentFulfiller = null;\r\n        if (--numScheduledCalls === 0)\r\n            finalizePhysicalTick();\r\n        --listener.psd.ref || listener.psd.finalize();\r\n    }\r\n}\r\nfunction getStack(promise, stacks, limit) {\r\n    if (stacks.length === limit)\r\n        return stacks;\r\n    var stack = \"\";\r\n    if (promise._state === false) {\r\n        var failure = promise._value, errorName, message;\r\n        if (failure != null) {\r\n            errorName = failure.name || \"Error\";\r\n            message = failure.message || failure;\r\n            stack = prettyStack(failure, 0);\r\n        }\r\n        else {\r\n            errorName = failure;\r\n            message = \"\";\r\n        }\r\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\r\n    }\r\n    if (debug) {\r\n        stack = prettyStack(promise._stackHolder, 2);\r\n        if (stack && stacks.indexOf(stack) === -1)\r\n            stacks.push(stack);\r\n        if (promise._prev)\r\n            getStack(promise._prev, stacks, limit);\r\n    }\r\n    return stacks;\r\n}\r\nfunction linkToPreviousPromise(promise, prev) {\r\n    var numPrev = prev ? prev._numPrev + 1 : 0;\r\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\r\n        promise._prev = prev;\r\n        promise._numPrev = numPrev;\r\n    }\r\n}\r\nfunction physicalTick() {\r\n    beginMicroTickScope() && endMicroTickScope();\r\n}\r\nfunction beginMicroTickScope() {\r\n    var wasRootExec = isOutsideMicroTick;\r\n    isOutsideMicroTick = false;\r\n    needsNewPhysicalTick = false;\r\n    return wasRootExec;\r\n}\r\nfunction endMicroTickScope() {\r\n    var callbacks, i, l;\r\n    do {\r\n        while (microtickQueue.length > 0) {\r\n            callbacks = microtickQueue;\r\n            microtickQueue = [];\r\n            l = callbacks.length;\r\n            for (i = 0; i < l; ++i) {\r\n                var item = callbacks[i];\r\n                item[0].apply(null, item[1]);\r\n            }\r\n        }\r\n    } while (microtickQueue.length > 0);\r\n    isOutsideMicroTick = true;\r\n    needsNewPhysicalTick = true;\r\n}\r\nfunction finalizePhysicalTick() {\r\n    var unhandledErrs = unhandledErrors;\r\n    unhandledErrors = [];\r\n    unhandledErrs.forEach(p => {\r\n        p._PSD.onunhandled.call(null, p._value, p);\r\n    });\r\n    var finalizers = tickFinalizers.slice(0);\r\n    var i = finalizers.length;\r\n    while (i)\r\n        finalizers[--i]();\r\n}\r\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\r\n    function finalizer() {\r\n        fn();\r\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\r\n    }\r\n    tickFinalizers.push(finalizer);\r\n    ++numScheduledCalls;\r\n    asap(() => {\r\n        if (--numScheduledCalls === 0)\r\n            finalizePhysicalTick();\r\n    }, []);\r\n}\r\nfunction addPossiblyUnhandledError(promise) {\r\n    if (!unhandledErrors.some(p => p._value === promise._value))\r\n        unhandledErrors.push(promise);\r\n}\r\nfunction markErrorAsHandled(promise) {\r\n    var i = unhandledErrors.length;\r\n    while (i)\r\n        if (unhandledErrors[--i]._value === promise._value) {\r\n            unhandledErrors.splice(i, 1);\r\n            return;\r\n        }\r\n}\r\nfunction PromiseReject(reason) {\r\n    return new DexiePromise(INTERNAL, false, reason);\r\n}\r\nfunction wrap(fn, errorCatcher) {\r\n    var psd = PSD;\r\n    return function () {\r\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\r\n        try {\r\n            switchToZone(psd, true);\r\n            return fn.apply(this, arguments);\r\n        }\r\n        catch (e) {\r\n            errorCatcher && errorCatcher(e);\r\n        }\r\n        finally {\r\n            switchToZone(outerScope, false);\r\n            if (wasRootExec)\r\n                endMicroTickScope();\r\n        }\r\n    };\r\n}\r\nconst task = { awaits: 0, echoes: 0, id: 0 };\r\nvar taskCounter = 0;\r\nvar zoneStack = [];\r\nvar zoneEchoes = 0;\r\nvar totalEchoes = 0;\r\nvar zone_id_counter = 0;\r\nfunction newScope(fn, props, a1, a2) {\r\n    var parent = PSD, psd = Object.create(parent);\r\n    psd.parent = parent;\r\n    psd.ref = 0;\r\n    psd.global = false;\r\n    psd.id = ++zone_id_counter;\r\n    var globalEnv = globalPSD.env;\r\n    psd.env = patchGlobalPromise ? {\r\n        Promise: DexiePromise,\r\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\r\n        all: DexiePromise.all,\r\n        race: DexiePromise.race,\r\n        allSettled: DexiePromise.allSettled,\r\n        any: DexiePromise.any,\r\n        resolve: DexiePromise.resolve,\r\n        reject: DexiePromise.reject,\r\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\r\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\r\n    } : {};\r\n    if (props)\r\n        extend(psd, props);\r\n    ++parent.ref;\r\n    psd.finalize = function () {\r\n        --this.parent.ref || this.parent.finalize();\r\n    };\r\n    var rv = usePSD(psd, fn, a1, a2);\r\n    if (psd.ref === 0)\r\n        psd.finalize();\r\n    return rv;\r\n}\r\nfunction incrementExpectedAwaits() {\r\n    if (!task.id)\r\n        task.id = ++taskCounter;\r\n    ++task.awaits;\r\n    task.echoes += ZONE_ECHO_LIMIT;\r\n    return task.id;\r\n}\r\nfunction decrementExpectedAwaits() {\r\n    if (!task.awaits)\r\n        return false;\r\n    if (--task.awaits === 0)\r\n        task.id = 0;\r\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\r\n    return true;\r\n}\r\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\r\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\r\n}\r\nfunction onPossibleParallellAsync(possiblePromise) {\r\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\r\n        incrementExpectedAwaits();\r\n        return possiblePromise.then(x => {\r\n            decrementExpectedAwaits();\r\n            return x;\r\n        }, e => {\r\n            decrementExpectedAwaits();\r\n            return rejection(e);\r\n        });\r\n    }\r\n    return possiblePromise;\r\n}\r\nfunction zoneEnterEcho(targetZone) {\r\n    ++totalEchoes;\r\n    if (!task.echoes || --task.echoes === 0) {\r\n        task.echoes = task.id = 0;\r\n    }\r\n    zoneStack.push(PSD);\r\n    switchToZone(targetZone, true);\r\n}\r\nfunction zoneLeaveEcho() {\r\n    var zone = zoneStack[zoneStack.length - 1];\r\n    zoneStack.pop();\r\n    switchToZone(zone, false);\r\n}\r\nfunction switchToZone(targetZone, bEnteringZone) {\r\n    var currentZone = PSD;\r\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\r\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\r\n    }\r\n    if (targetZone === PSD)\r\n        return;\r\n    PSD = targetZone;\r\n    if (currentZone === globalPSD)\r\n        globalPSD.env = snapShot();\r\n    if (patchGlobalPromise) {\r\n        var GlobalPromise = globalPSD.env.Promise;\r\n        var targetEnv = targetZone.env;\r\n        nativePromiseProto.then = targetEnv.nthen;\r\n        GlobalPromise.prototype.then = targetEnv.gthen;\r\n        if (currentZone.global || targetZone.global) {\r\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\r\n            GlobalPromise.all = targetEnv.all;\r\n            GlobalPromise.race = targetEnv.race;\r\n            GlobalPromise.resolve = targetEnv.resolve;\r\n            GlobalPromise.reject = targetEnv.reject;\r\n            if (targetEnv.allSettled)\r\n                GlobalPromise.allSettled = targetEnv.allSettled;\r\n            if (targetEnv.any)\r\n                GlobalPromise.any = targetEnv.any;\r\n        }\r\n    }\r\n}\r\nfunction snapShot() {\r\n    var GlobalPromise = _global.Promise;\r\n    return patchGlobalPromise ? {\r\n        Promise: GlobalPromise,\r\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\r\n        all: GlobalPromise.all,\r\n        race: GlobalPromise.race,\r\n        allSettled: GlobalPromise.allSettled,\r\n        any: GlobalPromise.any,\r\n        resolve: GlobalPromise.resolve,\r\n        reject: GlobalPromise.reject,\r\n        nthen: nativePromiseProto.then,\r\n        gthen: GlobalPromise.prototype.then\r\n    } : {};\r\n}\r\nfunction usePSD(psd, fn, a1, a2, a3) {\r\n    var outerScope = PSD;\r\n    try {\r\n        switchToZone(psd, true);\r\n        return fn(a1, a2, a3);\r\n    }\r\n    finally {\r\n        switchToZone(outerScope, false);\r\n    }\r\n}\r\nfunction enqueueNativeMicroTask(job) {\r\n    nativePromiseThen.call(resolvedNativePromise, job);\r\n}\r\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\r\n    return typeof fn !== 'function' ? fn : function () {\r\n        var outerZone = PSD;\r\n        if (possibleAwait)\r\n            incrementExpectedAwaits();\r\n        switchToZone(zone, true);\r\n        try {\r\n            return fn.apply(this, arguments);\r\n        }\r\n        finally {\r\n            switchToZone(outerZone, false);\r\n            if (cleanup)\r\n                enqueueNativeMicroTask(decrementExpectedAwaits);\r\n        }\r\n    };\r\n}\r\nfunction getPatchedPromiseThen(origThen, zone) {\r\n    return function (onResolved, onRejected) {\r\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\r\n    };\r\n}\r\nconst UNHANDLEDREJECTION = \"unhandledrejection\";\r\nfunction globalError(err, promise) {\r\n    var rv;\r\n    try {\r\n        rv = promise.onuncatched(err);\r\n    }\r\n    catch (e) { }\r\n    if (rv !== false)\r\n        try {\r\n            var event, eventData = { promise: promise, reason: err };\r\n            if (_global.document && document.createEvent) {\r\n                event = document.createEvent('Event');\r\n                event.initEvent(UNHANDLEDREJECTION, true, true);\r\n                extend(event, eventData);\r\n            }\r\n            else if (_global.CustomEvent) {\r\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\r\n                extend(event, eventData);\r\n            }\r\n            if (event && _global.dispatchEvent) {\r\n                dispatchEvent(event);\r\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\r\n                    try {\r\n                        _global.onunhandledrejection(event);\r\n                    }\r\n                    catch (_) { }\r\n            }\r\n            if (debug && event && !event.defaultPrevented) {\r\n                console.warn(`Unhandled rejection: ${err.stack || err}`);\r\n            }\r\n        }\r\n        catch (e) { }\r\n}\r\nvar rejection = DexiePromise.reject;\r\n\r\nfunction tempTransaction(db, mode, storeNames, fn) {\r\n    if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\r\n        if (db._state.openComplete) {\r\n            return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\r\n        }\r\n        if (!db._state.isBeingOpened) {\r\n            if (!db._options.autoOpen)\r\n                return rejection(new exceptions.DatabaseClosed());\r\n            db.open().catch(nop);\r\n        }\r\n        return db._state.dbReadyPromise.then(() => tempTransaction(db, mode, storeNames, fn));\r\n    }\r\n    else {\r\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\r\n        try {\r\n            trans.create();\r\n            db._state.PR1398_maxLoop = 3;\r\n        }\r\n        catch (ex) {\r\n            if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\r\n                console.warn('Dexie: Need to reopen db');\r\n                db._close();\r\n                return db.open().then(() => tempTransaction(db, mode, storeNames, fn));\r\n            }\r\n            return rejection(ex);\r\n        }\r\n        return trans._promise(mode, (resolve, reject) => {\r\n            return newScope(() => {\r\n                PSD.trans = trans;\r\n                return fn(resolve, reject, trans);\r\n            });\r\n        }).then(result => {\r\n            return trans._completion.then(() => result);\r\n        });\r\n    }\r\n}\r\n\r\nconst DEXIE_VERSION = '3.2.7';\r\nconst maxString = String.fromCharCode(65535);\r\nconst minKey = -Infinity;\r\nconst INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\r\nconst STRING_EXPECTED = \"String expected.\";\r\nconst connections = [];\r\nconst isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\r\nconst hasIEDeleteObjectStoreBug = isIEOrEdge;\r\nconst hangsOnDeleteLargeKeyRange = isIEOrEdge;\r\nconst dexieStackFrameFilter = frame => !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\r\nconst DBNAMES_DB = '__dbnames';\r\nconst READONLY = 'readonly';\r\nconst READWRITE = 'readwrite';\r\n\r\nfunction combine(filter1, filter2) {\r\n    return filter1 ?\r\n        filter2 ?\r\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\r\n            filter1 :\r\n        filter2;\r\n}\r\n\r\nconst AnyRange = {\r\n    type: 3 ,\r\n    lower: -Infinity,\r\n    lowerOpen: false,\r\n    upper: [[]],\r\n    upperOpen: false\r\n};\r\n\r\nfunction workaroundForUndefinedPrimKey(keyPath) {\r\n    return typeof keyPath === \"string\" && !/\\./.test(keyPath)\r\n        ? (obj) => {\r\n            if (obj[keyPath] === undefined && (keyPath in obj)) {\r\n                obj = deepClone(obj);\r\n                delete obj[keyPath];\r\n            }\r\n            return obj;\r\n        }\r\n        : (obj) => obj;\r\n}\r\n\r\nclass Table {\r\n    _trans(mode, fn, writeLocked) {\r\n        const trans = this._tx || PSD.trans;\r\n        const tableName = this.name;\r\n        function checkTableInTransaction(resolve, reject, trans) {\r\n            if (!trans.schema[tableName])\r\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\r\n            return fn(trans.idbtrans, trans);\r\n        }\r\n        const wasRootExec = beginMicroTickScope();\r\n        try {\r\n            return trans && trans.db === this.db ?\r\n                trans === PSD.trans ?\r\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\r\n                    newScope(() => trans._promise(mode, checkTableInTransaction, writeLocked), { trans: trans, transless: PSD.transless || PSD }) :\r\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\r\n        }\r\n        finally {\r\n            if (wasRootExec)\r\n                endMicroTickScope();\r\n        }\r\n    }\r\n    get(keyOrCrit, cb) {\r\n        if (keyOrCrit && keyOrCrit.constructor === Object)\r\n            return this.where(keyOrCrit).first(cb);\r\n        return this._trans('readonly', (trans) => {\r\n            return this.core.get({ trans, key: keyOrCrit })\r\n                .then(res => this.hook.reading.fire(res));\r\n        }).then(cb);\r\n    }\r\n    where(indexOrCrit) {\r\n        if (typeof indexOrCrit === 'string')\r\n            return new this.db.WhereClause(this, indexOrCrit);\r\n        if (isArray(indexOrCrit))\r\n            return new this.db.WhereClause(this, `[${indexOrCrit.join('+')}]`);\r\n        const keyPaths = keys(indexOrCrit);\r\n        if (keyPaths.length === 1)\r\n            return this\r\n                .where(keyPaths[0])\r\n                .equals(indexOrCrit[keyPaths[0]]);\r\n        const compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(ix => {\r\n            if (ix.compound &&\r\n                keyPaths.every(keyPath => ix.keyPath.indexOf(keyPath) >= 0)) {\r\n                for (let i = 0; i < keyPaths.length; ++i) {\r\n                    if (keyPaths.indexOf(ix.keyPath[i]) === -1)\r\n                        return false;\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        }).sort((a, b) => a.keyPath.length - b.keyPath.length)[0];\r\n        if (compoundIndex && this.db._maxKey !== maxString) {\r\n            const keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);\r\n            return this\r\n                .where(keyPathsInValidOrder)\r\n                .equals(keyPathsInValidOrder.map(kp => indexOrCrit[kp]));\r\n        }\r\n        if (!compoundIndex && debug)\r\n            console.warn(`The query ${JSON.stringify(indexOrCrit)} on ${this.name} would benefit of a ` +\r\n                `compound index [${keyPaths.join('+')}]`);\r\n        const { idxByName } = this.schema;\r\n        const idb = this.db._deps.indexedDB;\r\n        function equals(a, b) {\r\n            try {\r\n                return idb.cmp(a, b) === 0;\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n        const [idx, filterFunction] = keyPaths.reduce(([prevIndex, prevFilterFn], keyPath) => {\r\n            const index = idxByName[keyPath];\r\n            const value = indexOrCrit[keyPath];\r\n            return [\r\n                prevIndex || index,\r\n                prevIndex || !index ?\r\n                    combine(prevFilterFn, index && index.multi ?\r\n                        x => {\r\n                            const prop = getByKeyPath(x, keyPath);\r\n                            return isArray(prop) && prop.some(item => equals(value, item));\r\n                        } : x => equals(value, getByKeyPath(x, keyPath)))\r\n                    : prevFilterFn\r\n            ];\r\n        }, [null, null]);\r\n        return idx ?\r\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\r\n                .filter(filterFunction) :\r\n            compoundIndex ?\r\n                this.filter(filterFunction) :\r\n                this.where(keyPaths).equals('');\r\n    }\r\n    filter(filterFunction) {\r\n        return this.toCollection().and(filterFunction);\r\n    }\r\n    count(thenShortcut) {\r\n        return this.toCollection().count(thenShortcut);\r\n    }\r\n    offset(offset) {\r\n        return this.toCollection().offset(offset);\r\n    }\r\n    limit(numRows) {\r\n        return this.toCollection().limit(numRows);\r\n    }\r\n    each(callback) {\r\n        return this.toCollection().each(callback);\r\n    }\r\n    toArray(thenShortcut) {\r\n        return this.toCollection().toArray(thenShortcut);\r\n    }\r\n    toCollection() {\r\n        return new this.db.Collection(new this.db.WhereClause(this));\r\n    }\r\n    orderBy(index) {\r\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\r\n            `[${index.join('+')}]` :\r\n            index));\r\n    }\r\n    reverse() {\r\n        return this.toCollection().reverse();\r\n    }\r\n    mapToClass(constructor) {\r\n        this.schema.mappedClass = constructor;\r\n        const readHook = obj => {\r\n            if (!obj)\r\n                return obj;\r\n            const res = Object.create(constructor.prototype);\r\n            for (var m in obj)\r\n                if (hasOwn(obj, m))\r\n                    try {\r\n                        res[m] = obj[m];\r\n                    }\r\n                    catch (_) { }\r\n            return res;\r\n        };\r\n        if (this.schema.readHook) {\r\n            this.hook.reading.unsubscribe(this.schema.readHook);\r\n        }\r\n        this.schema.readHook = readHook;\r\n        this.hook(\"reading\", readHook);\r\n        return constructor;\r\n    }\r\n    defineClass() {\r\n        function Class(content) {\r\n            extend(this, content);\r\n        }\r\n        return this.mapToClass(Class);\r\n    }\r\n    add(obj, key) {\r\n        const { auto, keyPath } = this.schema.primKey;\r\n        let objToAdd = obj;\r\n        if (keyPath && auto) {\r\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\r\n        }\r\n        return this._trans('readwrite', trans => {\r\n            return this.core.mutate({ trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\r\n        }).then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\r\n            .then(lastResult => {\r\n            if (keyPath) {\r\n                try {\r\n                    setByKeyPath(obj, keyPath, lastResult);\r\n                }\r\n                catch (_) { }\r\n            }\r\n            return lastResult;\r\n        });\r\n    }\r\n    update(keyOrObject, modifications) {\r\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\r\n            const key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\r\n            if (key === undefined)\r\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\r\n            try {\r\n                if (typeof modifications !== \"function\") {\r\n                    keys(modifications).forEach(keyPath => {\r\n                        setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\r\n                    });\r\n                }\r\n                else {\r\n                    modifications(keyOrObject, { value: keyOrObject, primKey: key });\r\n                }\r\n            }\r\n            catch (_a) {\r\n            }\r\n            return this.where(\":id\").equals(key).modify(modifications);\r\n        }\r\n        else {\r\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\r\n        }\r\n    }\r\n    put(obj, key) {\r\n        const { auto, keyPath } = this.schema.primKey;\r\n        let objToAdd = obj;\r\n        if (keyPath && auto) {\r\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\r\n        }\r\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }))\r\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\r\n            .then(lastResult => {\r\n            if (keyPath) {\r\n                try {\r\n                    setByKeyPath(obj, keyPath, lastResult);\r\n                }\r\n                catch (_) { }\r\n            }\r\n            return lastResult;\r\n        });\r\n    }\r\n    delete(key) {\r\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'delete', keys: [key] }))\r\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\r\n    }\r\n    clear() {\r\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'deleteRange', range: AnyRange }))\r\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\r\n    }\r\n    bulkGet(keys) {\r\n        return this._trans('readonly', trans => {\r\n            return this.core.getMany({\r\n                keys,\r\n                trans\r\n            }).then(result => result.map(res => this.hook.reading.fire(res)));\r\n        });\r\n    }\r\n    bulkAdd(objects, keysOrOptions, options) {\r\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\r\n        options = options || (keys ? undefined : keysOrOptions);\r\n        const wantResults = options ? options.allKeys : undefined;\r\n        return this._trans('readwrite', trans => {\r\n            const { auto, keyPath } = this.schema.primKey;\r\n            if (keyPath && keys)\r\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\r\n            if (keys && keys.length !== objects.length)\r\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\r\n            const numObjects = objects.length;\r\n            let objectsToAdd = keyPath && auto ?\r\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\r\n                objects;\r\n            return this.core.mutate({ trans, type: 'add', keys: keys, values: objectsToAdd, wantResults })\r\n                .then(({ numFailures, results, lastResult, failures }) => {\r\n                const result = wantResults ? results : lastResult;\r\n                if (numFailures === 0)\r\n                    return result;\r\n                throw new BulkError(`${this.name}.bulkAdd(): ${numFailures} of ${numObjects} operations failed`, failures);\r\n            });\r\n        });\r\n    }\r\n    bulkPut(objects, keysOrOptions, options) {\r\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\r\n        options = options || (keys ? undefined : keysOrOptions);\r\n        const wantResults = options ? options.allKeys : undefined;\r\n        return this._trans('readwrite', trans => {\r\n            const { auto, keyPath } = this.schema.primKey;\r\n            if (keyPath && keys)\r\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\r\n            if (keys && keys.length !== objects.length)\r\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\r\n            const numObjects = objects.length;\r\n            let objectsToPut = keyPath && auto ?\r\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\r\n                objects;\r\n            return this.core.mutate({ trans, type: 'put', keys: keys, values: objectsToPut, wantResults })\r\n                .then(({ numFailures, results, lastResult, failures }) => {\r\n                const result = wantResults ? results : lastResult;\r\n                if (numFailures === 0)\r\n                    return result;\r\n                throw new BulkError(`${this.name}.bulkPut(): ${numFailures} of ${numObjects} operations failed`, failures);\r\n            });\r\n        });\r\n    }\r\n    bulkDelete(keys) {\r\n        const numKeys = keys.length;\r\n        return this._trans('readwrite', trans => {\r\n            return this.core.mutate({ trans, type: 'delete', keys: keys });\r\n        }).then(({ numFailures, lastResult, failures }) => {\r\n            if (numFailures === 0)\r\n                return lastResult;\r\n            throw new BulkError(`${this.name}.bulkDelete(): ${numFailures} of ${numKeys} operations failed`, failures);\r\n        });\r\n    }\r\n}\r\n\r\nfunction Events(ctx) {\r\n    var evs = {};\r\n    var rv = function (eventName, subscriber) {\r\n        if (subscriber) {\r\n            var i = arguments.length, args = new Array(i - 1);\r\n            while (--i)\r\n                args[i - 1] = arguments[i];\r\n            evs[eventName].subscribe.apply(null, args);\r\n            return ctx;\r\n        }\r\n        else if (typeof (eventName) === 'string') {\r\n            return evs[eventName];\r\n        }\r\n    };\r\n    rv.addEventType = add;\r\n    for (var i = 1, l = arguments.length; i < l; ++i) {\r\n        add(arguments[i]);\r\n    }\r\n    return rv;\r\n    function add(eventName, chainFunction, defaultFunction) {\r\n        if (typeof eventName === 'object')\r\n            return addConfiguredEvents(eventName);\r\n        if (!chainFunction)\r\n            chainFunction = reverseStoppableEventChain;\r\n        if (!defaultFunction)\r\n            defaultFunction = nop;\r\n        var context = {\r\n            subscribers: [],\r\n            fire: defaultFunction,\r\n            subscribe: function (cb) {\r\n                if (context.subscribers.indexOf(cb) === -1) {\r\n                    context.subscribers.push(cb);\r\n                    context.fire = chainFunction(context.fire, cb);\r\n                }\r\n            },\r\n            unsubscribe: function (cb) {\r\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\r\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\r\n            }\r\n        };\r\n        evs[eventName] = rv[eventName] = context;\r\n        return context;\r\n    }\r\n    function addConfiguredEvents(cfg) {\r\n        keys(cfg).forEach(function (eventName) {\r\n            var args = cfg[eventName];\r\n            if (isArray(args)) {\r\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\r\n            }\r\n            else if (args === 'asap') {\r\n                var context = add(eventName, mirror, function fire() {\r\n                    var i = arguments.length, args = new Array(i);\r\n                    while (i--)\r\n                        args[i] = arguments[i];\r\n                    context.subscribers.forEach(function (fn) {\r\n                        asap$1(function fireEvent() {\r\n                            fn.apply(null, args);\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            else\r\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\r\n        });\r\n    }\r\n}\r\n\r\nfunction makeClassConstructor(prototype, constructor) {\r\n    derive(constructor).from({ prototype });\r\n    return constructor;\r\n}\r\n\r\nfunction createTableConstructor(db) {\r\n    return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\r\n        this.db = db;\r\n        this._tx = trans;\r\n        this.name = name;\r\n        this.schema = tableSchema;\r\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\r\n            \"creating\": [hookCreatingChain, nop],\r\n            \"reading\": [pureFunctionChain, mirror],\r\n            \"updating\": [hookUpdatingChain, nop],\r\n            \"deleting\": [hookDeletingChain, nop]\r\n        });\r\n    });\r\n}\r\n\r\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\r\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\r\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\r\n}\r\nfunction addFilter(ctx, fn) {\r\n    ctx.filter = combine(ctx.filter, fn);\r\n}\r\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\r\n    var curr = ctx.replayFilter;\r\n    ctx.replayFilter = curr ? () => combine(curr(), factory()) : factory;\r\n    ctx.justLimit = isLimitFilter && !curr;\r\n}\r\nfunction addMatchFilter(ctx, fn) {\r\n    ctx.isMatch = combine(ctx.isMatch, fn);\r\n}\r\nfunction getIndexOrStore(ctx, coreSchema) {\r\n    if (ctx.isPrimKey)\r\n        return coreSchema.primaryKey;\r\n    const index = coreSchema.getIndexByKeyPath(ctx.index);\r\n    if (!index)\r\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\r\n    return index;\r\n}\r\nfunction openCursor(ctx, coreTable, trans) {\r\n    const index = getIndexOrStore(ctx, coreTable.schema);\r\n    return coreTable.openCursor({\r\n        trans,\r\n        values: !ctx.keysOnly,\r\n        reverse: ctx.dir === 'prev',\r\n        unique: !!ctx.unique,\r\n        query: {\r\n            index,\r\n            range: ctx.range\r\n        }\r\n    });\r\n}\r\nfunction iter(ctx, fn, coreTrans, coreTable) {\r\n    const filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\r\n    if (!ctx.or) {\r\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\r\n    }\r\n    else {\r\n        const set = {};\r\n        const union = (item, cursor, advance) => {\r\n            if (!filter || filter(cursor, advance, result => cursor.stop(result), err => cursor.fail(err))) {\r\n                var primaryKey = cursor.primaryKey;\r\n                var key = '' + primaryKey;\r\n                if (key === '[object ArrayBuffer]')\r\n                    key = '' + new Uint8Array(primaryKey);\r\n                if (!hasOwn(set, key)) {\r\n                    set[key] = true;\r\n                    fn(item, cursor, advance);\r\n                }\r\n            }\r\n        };\r\n        return Promise.all([\r\n            ctx.or._iterate(union, coreTrans),\r\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\r\n        ]);\r\n    }\r\n}\r\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\r\n    var mappedFn = valueMapper ? (x, c, a) => fn(valueMapper(x), c, a) : fn;\r\n    var wrappedFn = wrap(mappedFn);\r\n    return cursorPromise.then(cursor => {\r\n        if (cursor) {\r\n            return cursor.start(() => {\r\n                var c = () => cursor.continue();\r\n                if (!filter || filter(cursor, advancer => c = advancer, val => { cursor.stop(val); c = nop; }, e => { cursor.fail(e); c = nop; }))\r\n                    wrappedFn(cursor.value, cursor, advancer => c = advancer);\r\n                c();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction cmp(a, b) {\r\n    try {\r\n        const ta = type(a);\r\n        const tb = type(b);\r\n        if (ta !== tb) {\r\n            if (ta === 'Array')\r\n                return 1;\r\n            if (tb === 'Array')\r\n                return -1;\r\n            if (ta === 'binary')\r\n                return 1;\r\n            if (tb === 'binary')\r\n                return -1;\r\n            if (ta === 'string')\r\n                return 1;\r\n            if (tb === 'string')\r\n                return -1;\r\n            if (ta === 'Date')\r\n                return 1;\r\n            if (tb !== 'Date')\r\n                return NaN;\r\n            return -1;\r\n        }\r\n        switch (ta) {\r\n            case 'number':\r\n            case 'Date':\r\n            case 'string':\r\n                return a > b ? 1 : a < b ? -1 : 0;\r\n            case 'binary': {\r\n                return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\r\n            }\r\n            case 'Array':\r\n                return compareArrays(a, b);\r\n        }\r\n    }\r\n    catch (_a) { }\r\n    return NaN;\r\n}\r\nfunction compareArrays(a, b) {\r\n    const al = a.length;\r\n    const bl = b.length;\r\n    const l = al < bl ? al : bl;\r\n    for (let i = 0; i < l; ++i) {\r\n        const res = cmp(a[i], b[i]);\r\n        if (res !== 0)\r\n            return res;\r\n    }\r\n    return al === bl ? 0 : al < bl ? -1 : 1;\r\n}\r\nfunction compareUint8Arrays(a, b) {\r\n    const al = a.length;\r\n    const bl = b.length;\r\n    const l = al < bl ? al : bl;\r\n    for (let i = 0; i < l; ++i) {\r\n        if (a[i] !== b[i])\r\n            return a[i] < b[i] ? -1 : 1;\r\n    }\r\n    return al === bl ? 0 : al < bl ? -1 : 1;\r\n}\r\nfunction type(x) {\r\n    const t = typeof x;\r\n    if (t !== 'object')\r\n        return t;\r\n    if (ArrayBuffer.isView(x))\r\n        return 'binary';\r\n    const tsTag = toStringTag(x);\r\n    return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\r\n}\r\nfunction getUint8Array(a) {\r\n    if (a instanceof Uint8Array)\r\n        return a;\r\n    if (ArrayBuffer.isView(a))\r\n        return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\r\n    return new Uint8Array(a);\r\n}\r\n\r\nclass Collection {\r\n    _read(fn, cb) {\r\n        var ctx = this._ctx;\r\n        return ctx.error ?\r\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\r\n            ctx.table._trans('readonly', fn).then(cb);\r\n    }\r\n    _write(fn) {\r\n        var ctx = this._ctx;\r\n        return ctx.error ?\r\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\r\n            ctx.table._trans('readwrite', fn, \"locked\");\r\n    }\r\n    _addAlgorithm(fn) {\r\n        var ctx = this._ctx;\r\n        ctx.algorithm = combine(ctx.algorithm, fn);\r\n    }\r\n    _iterate(fn, coreTrans) {\r\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\r\n    }\r\n    clone(props) {\r\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\r\n        if (props)\r\n            extend(ctx, props);\r\n        rv._ctx = ctx;\r\n        return rv;\r\n    }\r\n    raw() {\r\n        this._ctx.valueMapper = null;\r\n        return this;\r\n    }\r\n    each(fn) {\r\n        var ctx = this._ctx;\r\n        return this._read(trans => iter(ctx, fn, trans, ctx.table.core));\r\n    }\r\n    count(cb) {\r\n        return this._read(trans => {\r\n            const ctx = this._ctx;\r\n            const coreTable = ctx.table.core;\r\n            if (isPlainKeyRange(ctx, true)) {\r\n                return coreTable.count({\r\n                    trans,\r\n                    query: {\r\n                        index: getIndexOrStore(ctx, coreTable.schema),\r\n                        range: ctx.range\r\n                    }\r\n                }).then(count => Math.min(count, ctx.limit));\r\n            }\r\n            else {\r\n                var count = 0;\r\n                return iter(ctx, () => { ++count; return false; }, trans, coreTable)\r\n                    .then(() => count);\r\n            }\r\n        }).then(cb);\r\n    }\r\n    sortBy(keyPath, cb) {\r\n        const parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\r\n        function getval(obj, i) {\r\n            if (i)\r\n                return getval(obj[parts[i]], i - 1);\r\n            return obj[lastPart];\r\n        }\r\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\r\n        function sorter(a, b) {\r\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\r\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\r\n        }\r\n        return this.toArray(function (a) {\r\n            return a.sort(sorter);\r\n        }).then(cb);\r\n    }\r\n    toArray(cb) {\r\n        return this._read(trans => {\r\n            var ctx = this._ctx;\r\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\r\n                const { valueMapper } = ctx;\r\n                const index = getIndexOrStore(ctx, ctx.table.core.schema);\r\n                return ctx.table.core.query({\r\n                    trans,\r\n                    limit: ctx.limit,\r\n                    values: true,\r\n                    query: {\r\n                        index,\r\n                        range: ctx.range\r\n                    }\r\n                }).then(({ result }) => valueMapper ? result.map(valueMapper) : result);\r\n            }\r\n            else {\r\n                const a = [];\r\n                return iter(ctx, item => a.push(item), trans, ctx.table.core).then(() => a);\r\n            }\r\n        }, cb);\r\n    }\r\n    offset(offset) {\r\n        var ctx = this._ctx;\r\n        if (offset <= 0)\r\n            return this;\r\n        ctx.offset += offset;\r\n        if (isPlainKeyRange(ctx)) {\r\n            addReplayFilter(ctx, () => {\r\n                var offsetLeft = offset;\r\n                return (cursor, advance) => {\r\n                    if (offsetLeft === 0)\r\n                        return true;\r\n                    if (offsetLeft === 1) {\r\n                        --offsetLeft;\r\n                        return false;\r\n                    }\r\n                    advance(() => {\r\n                        cursor.advance(offsetLeft);\r\n                        offsetLeft = 0;\r\n                    });\r\n                    return false;\r\n                };\r\n            });\r\n        }\r\n        else {\r\n            addReplayFilter(ctx, () => {\r\n                var offsetLeft = offset;\r\n                return () => (--offsetLeft < 0);\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n    limit(numRows) {\r\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\r\n        addReplayFilter(this._ctx, () => {\r\n            var rowsLeft = numRows;\r\n            return function (cursor, advance, resolve) {\r\n                if (--rowsLeft <= 0)\r\n                    advance(resolve);\r\n                return rowsLeft >= 0;\r\n            };\r\n        }, true);\r\n        return this;\r\n    }\r\n    until(filterFunction, bIncludeStopEntry) {\r\n        addFilter(this._ctx, function (cursor, advance, resolve) {\r\n            if (filterFunction(cursor.value)) {\r\n                advance(resolve);\r\n                return bIncludeStopEntry;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n    first(cb) {\r\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\r\n    }\r\n    last(cb) {\r\n        return this.reverse().first(cb);\r\n    }\r\n    filter(filterFunction) {\r\n        addFilter(this._ctx, function (cursor) {\r\n            return filterFunction(cursor.value);\r\n        });\r\n        addMatchFilter(this._ctx, filterFunction);\r\n        return this;\r\n    }\r\n    and(filter) {\r\n        return this.filter(filter);\r\n    }\r\n    or(indexName) {\r\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\r\n    }\r\n    reverse() {\r\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\r\n        if (this._ondirectionchange)\r\n            this._ondirectionchange(this._ctx.dir);\r\n        return this;\r\n    }\r\n    desc() {\r\n        return this.reverse();\r\n    }\r\n    eachKey(cb) {\r\n        var ctx = this._ctx;\r\n        ctx.keysOnly = !ctx.isMatch;\r\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\r\n    }\r\n    eachUniqueKey(cb) {\r\n        this._ctx.unique = \"unique\";\r\n        return this.eachKey(cb);\r\n    }\r\n    eachPrimaryKey(cb) {\r\n        var ctx = this._ctx;\r\n        ctx.keysOnly = !ctx.isMatch;\r\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\r\n    }\r\n    keys(cb) {\r\n        var ctx = this._ctx;\r\n        ctx.keysOnly = !ctx.isMatch;\r\n        var a = [];\r\n        return this.each(function (item, cursor) {\r\n            a.push(cursor.key);\r\n        }).then(function () {\r\n            return a;\r\n        }).then(cb);\r\n    }\r\n    primaryKeys(cb) {\r\n        var ctx = this._ctx;\r\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\r\n            return this._read(trans => {\r\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\r\n                return ctx.table.core.query({\r\n                    trans,\r\n                    values: false,\r\n                    limit: ctx.limit,\r\n                    query: {\r\n                        index,\r\n                        range: ctx.range\r\n                    }\r\n                });\r\n            }).then(({ result }) => result).then(cb);\r\n        }\r\n        ctx.keysOnly = !ctx.isMatch;\r\n        var a = [];\r\n        return this.each(function (item, cursor) {\r\n            a.push(cursor.primaryKey);\r\n        }).then(function () {\r\n            return a;\r\n        }).then(cb);\r\n    }\r\n    uniqueKeys(cb) {\r\n        this._ctx.unique = \"unique\";\r\n        return this.keys(cb);\r\n    }\r\n    firstKey(cb) {\r\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\r\n    }\r\n    lastKey(cb) {\r\n        return this.reverse().firstKey(cb);\r\n    }\r\n    distinct() {\r\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\r\n        if (!idx || !idx.multi)\r\n            return this;\r\n        var set = {};\r\n        addFilter(this._ctx, function (cursor) {\r\n            var strKey = cursor.primaryKey.toString();\r\n            var found = hasOwn(set, strKey);\r\n            set[strKey] = true;\r\n            return !found;\r\n        });\r\n        return this;\r\n    }\r\n    modify(changes) {\r\n        var ctx = this._ctx;\r\n        return this._write(trans => {\r\n            var modifyer;\r\n            if (typeof changes === 'function') {\r\n                modifyer = changes;\r\n            }\r\n            else {\r\n                var keyPaths = keys(changes);\r\n                var numKeys = keyPaths.length;\r\n                modifyer = function (item) {\r\n                    var anythingModified = false;\r\n                    for (var i = 0; i < numKeys; ++i) {\r\n                        var keyPath = keyPaths[i], val = changes[keyPath];\r\n                        if (getByKeyPath(item, keyPath) !== val) {\r\n                            setByKeyPath(item, keyPath, val);\r\n                            anythingModified = true;\r\n                        }\r\n                    }\r\n                    return anythingModified;\r\n                };\r\n            }\r\n            const coreTable = ctx.table.core;\r\n            const { outbound, extractKey } = coreTable.schema.primaryKey;\r\n            const limit = this.db._options.modifyChunkSize || 200;\r\n            const totalFailures = [];\r\n            let successCount = 0;\r\n            const failedKeys = [];\r\n            const applyMutateResult = (expectedCount, res) => {\r\n                const { failures, numFailures } = res;\r\n                successCount += expectedCount - numFailures;\r\n                for (let pos of keys(failures)) {\r\n                    totalFailures.push(failures[pos]);\r\n                }\r\n            };\r\n            return this.clone().primaryKeys().then(keys => {\r\n                const nextChunk = (offset) => {\r\n                    const count = Math.min(limit, keys.length - offset);\r\n                    return coreTable.getMany({\r\n                        trans,\r\n                        keys: keys.slice(offset, offset + count),\r\n                        cache: \"immutable\"\r\n                    }).then(values => {\r\n                        const addValues = [];\r\n                        const putValues = [];\r\n                        const putKeys = outbound ? [] : null;\r\n                        const deleteKeys = [];\r\n                        for (let i = 0; i < count; ++i) {\r\n                            const origValue = values[i];\r\n                            const ctx = {\r\n                                value: deepClone(origValue),\r\n                                primKey: keys[offset + i]\r\n                            };\r\n                            if (modifyer.call(ctx, ctx.value, ctx) !== false) {\r\n                                if (ctx.value == null) {\r\n                                    deleteKeys.push(keys[offset + i]);\r\n                                }\r\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx.value)) !== 0) {\r\n                                    deleteKeys.push(keys[offset + i]);\r\n                                    addValues.push(ctx.value);\r\n                                }\r\n                                else {\r\n                                    putValues.push(ctx.value);\r\n                                    if (outbound)\r\n                                        putKeys.push(keys[offset + i]);\r\n                                }\r\n                            }\r\n                        }\r\n                        const criteria = isPlainKeyRange(ctx) &&\r\n                            ctx.limit === Infinity &&\r\n                            (typeof changes !== 'function' || changes === deleteCallback) && {\r\n                            index: ctx.index,\r\n                            range: ctx.range\r\n                        };\r\n                        return Promise.resolve(addValues.length > 0 &&\r\n                            coreTable.mutate({ trans, type: 'add', values: addValues })\r\n                                .then(res => {\r\n                                for (let pos in res.failures) {\r\n                                    deleteKeys.splice(parseInt(pos), 1);\r\n                                }\r\n                                applyMutateResult(addValues.length, res);\r\n                            })).then(() => (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\r\n                            coreTable.mutate({\r\n                                trans,\r\n                                type: 'put',\r\n                                keys: putKeys,\r\n                                values: putValues,\r\n                                criteria,\r\n                                changeSpec: typeof changes !== 'function'\r\n                                    && changes\r\n                            }).then(res => applyMutateResult(putValues.length, res))).then(() => (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\r\n                            coreTable.mutate({\r\n                                trans,\r\n                                type: 'delete',\r\n                                keys: deleteKeys,\r\n                                criteria\r\n                            }).then(res => applyMutateResult(deleteKeys.length, res))).then(() => {\r\n                            return keys.length > offset + count && nextChunk(offset + limit);\r\n                        });\r\n                    });\r\n                };\r\n                return nextChunk(0).then(() => {\r\n                    if (totalFailures.length > 0)\r\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\r\n                    return keys.length;\r\n                });\r\n            });\r\n        });\r\n    }\r\n    delete() {\r\n        var ctx = this._ctx, range = ctx.range;\r\n        if (isPlainKeyRange(ctx) &&\r\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\r\n         {\r\n            return this._write(trans => {\r\n                const { primaryKey } = ctx.table.core.schema;\r\n                const coreRange = range;\r\n                return ctx.table.core.count({ trans, query: { index: primaryKey, range: coreRange } }).then(count => {\r\n                    return ctx.table.core.mutate({ trans, type: 'deleteRange', range: coreRange })\r\n                        .then(({ failures, lastResult, results, numFailures }) => {\r\n                        if (numFailures)\r\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(pos => failures[pos]), count - numFailures);\r\n                        return count - numFailures;\r\n                    });\r\n                });\r\n            });\r\n        }\r\n        return this.modify(deleteCallback);\r\n    }\r\n}\r\nconst deleteCallback = (value, ctx) => ctx.value = null;\r\n\r\nfunction createCollectionConstructor(db) {\r\n    return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\r\n        this.db = db;\r\n        let keyRange = AnyRange, error = null;\r\n        if (keyRangeGenerator)\r\n            try {\r\n                keyRange = keyRangeGenerator();\r\n            }\r\n            catch (ex) {\r\n                error = ex;\r\n            }\r\n        const whereCtx = whereClause._ctx;\r\n        const table = whereCtx.table;\r\n        const readingHook = table.hook.reading.fire;\r\n        this._ctx = {\r\n            table: table,\r\n            index: whereCtx.index,\r\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\r\n            range: keyRange,\r\n            keysOnly: false,\r\n            dir: \"next\",\r\n            unique: \"\",\r\n            algorithm: null,\r\n            filter: null,\r\n            replayFilter: null,\r\n            justLimit: true,\r\n            isMatch: null,\r\n            offset: 0,\r\n            limit: Infinity,\r\n            error: error,\r\n            or: whereCtx.or,\r\n            valueMapper: readingHook !== mirror ? readingHook : null\r\n        };\r\n    });\r\n}\r\n\r\nfunction simpleCompare(a, b) {\r\n    return a < b ? -1 : a === b ? 0 : 1;\r\n}\r\nfunction simpleCompareReverse(a, b) {\r\n    return a > b ? -1 : a === b ? 0 : 1;\r\n}\r\n\r\nfunction fail(collectionOrWhereClause, err, T) {\r\n    var collection = collectionOrWhereClause instanceof WhereClause ?\r\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\r\n        collectionOrWhereClause;\r\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\r\n    return collection;\r\n}\r\nfunction emptyCollection(whereClause) {\r\n    return new whereClause.Collection(whereClause, () => rangeEqual(\"\")).limit(0);\r\n}\r\nfunction upperFactory(dir) {\r\n    return dir === \"next\" ?\r\n        (s) => s.toUpperCase() :\r\n        (s) => s.toLowerCase();\r\n}\r\nfunction lowerFactory(dir) {\r\n    return dir === \"next\" ?\r\n        (s) => s.toLowerCase() :\r\n        (s) => s.toUpperCase();\r\n}\r\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\r\n    var length = Math.min(key.length, lowerNeedle.length);\r\n    var llp = -1;\r\n    for (var i = 0; i < length; ++i) {\r\n        var lwrKeyChar = lowerKey[i];\r\n        if (lwrKeyChar !== lowerNeedle[i]) {\r\n            if (cmp(key[i], upperNeedle[i]) < 0)\r\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\r\n            if (cmp(key[i], lowerNeedle[i]) < 0)\r\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\r\n            if (llp >= 0)\r\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\r\n            return null;\r\n        }\r\n        if (cmp(key[i], lwrKeyChar) < 0)\r\n            llp = i;\r\n    }\r\n    if (length < lowerNeedle.length && dir === \"next\")\r\n        return key + upperNeedle.substr(key.length);\r\n    if (length < key.length && dir === \"prev\")\r\n        return key.substr(0, upperNeedle.length);\r\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\r\n}\r\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\r\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\r\n    if (!needles.every(s => typeof s === 'string')) {\r\n        return fail(whereClause, STRING_EXPECTED);\r\n    }\r\n    function initDirection(dir) {\r\n        upper = upperFactory(dir);\r\n        lower = lowerFactory(dir);\r\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\r\n        var needleBounds = needles.map(function (needle) {\r\n            return { lower: lower(needle), upper: upper(needle) };\r\n        }).sort(function (a, b) {\r\n            return compare(a.lower, b.lower);\r\n        });\r\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\r\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\r\n        direction = dir;\r\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\r\n    }\r\n    initDirection(\"next\");\r\n    var c = new whereClause.Collection(whereClause, () => createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix));\r\n    c._ondirectionchange = function (direction) {\r\n        initDirection(direction);\r\n    };\r\n    var firstPossibleNeedle = 0;\r\n    c._addAlgorithm(function (cursor, advance, resolve) {\r\n        var key = cursor.key;\r\n        if (typeof key !== 'string')\r\n            return false;\r\n        var lowerKey = lower(key);\r\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\r\n            return true;\r\n        }\r\n        else {\r\n            var lowestPossibleCasing = null;\r\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\r\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\r\n                if (casing === null && lowestPossibleCasing === null)\r\n                    firstPossibleNeedle = i + 1;\r\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\r\n                    lowestPossibleCasing = casing;\r\n                }\r\n            }\r\n            if (lowestPossibleCasing !== null) {\r\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\r\n            }\r\n            else {\r\n                advance(resolve);\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n    return c;\r\n}\r\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\r\n    return {\r\n        type: 2 ,\r\n        lower,\r\n        upper,\r\n        lowerOpen,\r\n        upperOpen\r\n    };\r\n}\r\nfunction rangeEqual(value) {\r\n    return {\r\n        type: 1 ,\r\n        lower: value,\r\n        upper: value\r\n    };\r\n}\r\n\r\nclass WhereClause {\r\n    get Collection() {\r\n        return this._ctx.table.db.Collection;\r\n    }\r\n    between(lower, upper, includeLower, includeUpper) {\r\n        includeLower = includeLower !== false;\r\n        includeUpper = includeUpper === true;\r\n        try {\r\n            if ((this._cmp(lower, upper) > 0) ||\r\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\r\n                return emptyCollection(this);\r\n            return new this.Collection(this, () => createRange(lower, upper, !includeLower, !includeUpper));\r\n        }\r\n        catch (e) {\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        }\r\n    }\r\n    equals(value) {\r\n        if (value == null)\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        return new this.Collection(this, () => rangeEqual(value));\r\n    }\r\n    above(value) {\r\n        if (value == null)\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        return new this.Collection(this, () => createRange(value, undefined, true));\r\n    }\r\n    aboveOrEqual(value) {\r\n        if (value == null)\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        return new this.Collection(this, () => createRange(value, undefined, false));\r\n    }\r\n    below(value) {\r\n        if (value == null)\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        return new this.Collection(this, () => createRange(undefined, value, false, true));\r\n    }\r\n    belowOrEqual(value) {\r\n        if (value == null)\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        return new this.Collection(this, () => createRange(undefined, value));\r\n    }\r\n    startsWith(str) {\r\n        if (typeof str !== 'string')\r\n            return fail(this, STRING_EXPECTED);\r\n        return this.between(str, str + maxString, true, true);\r\n    }\r\n    startsWithIgnoreCase(str) {\r\n        if (str === \"\")\r\n            return this.startsWith(str);\r\n        return addIgnoreCaseAlgorithm(this, (x, a) => x.indexOf(a[0]) === 0, [str], maxString);\r\n    }\r\n    equalsIgnoreCase(str) {\r\n        return addIgnoreCaseAlgorithm(this, (x, a) => x === a[0], [str], \"\");\r\n    }\r\n    anyOfIgnoreCase() {\r\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\r\n        if (set.length === 0)\r\n            return emptyCollection(this);\r\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.indexOf(x) !== -1, set, \"\");\r\n    }\r\n    startsWithAnyOfIgnoreCase() {\r\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\r\n        if (set.length === 0)\r\n            return emptyCollection(this);\r\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.some(n => x.indexOf(n) === 0), set, maxString);\r\n    }\r\n    anyOf() {\r\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\r\n        let compare = this._cmp;\r\n        try {\r\n            set.sort(compare);\r\n        }\r\n        catch (e) {\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        }\r\n        if (set.length === 0)\r\n            return emptyCollection(this);\r\n        const c = new this.Collection(this, () => createRange(set[0], set[set.length - 1]));\r\n        c._ondirectionchange = direction => {\r\n            compare = (direction === \"next\" ?\r\n                this._ascending :\r\n                this._descending);\r\n            set.sort(compare);\r\n        };\r\n        let i = 0;\r\n        c._addAlgorithm((cursor, advance, resolve) => {\r\n            const key = cursor.key;\r\n            while (compare(key, set[i]) > 0) {\r\n                ++i;\r\n                if (i === set.length) {\r\n                    advance(resolve);\r\n                    return false;\r\n                }\r\n            }\r\n            if (compare(key, set[i]) === 0) {\r\n                return true;\r\n            }\r\n            else {\r\n                advance(() => { cursor.continue(set[i]); });\r\n                return false;\r\n            }\r\n        });\r\n        return c;\r\n    }\r\n    notEqual(value) {\r\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\r\n    }\r\n    noneOf() {\r\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\r\n        if (set.length === 0)\r\n            return new this.Collection(this);\r\n        try {\r\n            set.sort(this._ascending);\r\n        }\r\n        catch (e) {\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        }\r\n        const ranges = set.reduce((res, val) => res ?\r\n            res.concat([[res[res.length - 1][1], val]]) :\r\n            [[minKey, val]], null);\r\n        ranges.push([set[set.length - 1], this.db._maxKey]);\r\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\r\n    }\r\n    inAnyRange(ranges, options) {\r\n        const cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\r\n        if (ranges.length === 0)\r\n            return emptyCollection(this);\r\n        if (!ranges.every(range => range[0] !== undefined &&\r\n            range[1] !== undefined &&\r\n            ascending(range[0], range[1]) <= 0)) {\r\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\r\n        }\r\n        const includeLowers = !options || options.includeLowers !== false;\r\n        const includeUppers = options && options.includeUppers === true;\r\n        function addRange(ranges, newRange) {\r\n            let i = 0, l = ranges.length;\r\n            for (; i < l; ++i) {\r\n                const range = ranges[i];\r\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\r\n                    range[0] = min(range[0], newRange[0]);\r\n                    range[1] = max(range[1], newRange[1]);\r\n                    break;\r\n                }\r\n            }\r\n            if (i === l)\r\n                ranges.push(newRange);\r\n            return ranges;\r\n        }\r\n        let sortDirection = ascending;\r\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\r\n        let set;\r\n        try {\r\n            set = ranges.reduce(addRange, []);\r\n            set.sort(rangeSorter);\r\n        }\r\n        catch (ex) {\r\n            return fail(this, INVALID_KEY_ARGUMENT);\r\n        }\r\n        let rangePos = 0;\r\n        const keyIsBeyondCurrentEntry = includeUppers ?\r\n            key => ascending(key, set[rangePos][1]) > 0 :\r\n            key => ascending(key, set[rangePos][1]) >= 0;\r\n        const keyIsBeforeCurrentEntry = includeLowers ?\r\n            key => descending(key, set[rangePos][0]) > 0 :\r\n            key => descending(key, set[rangePos][0]) >= 0;\r\n        function keyWithinCurrentRange(key) {\r\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\r\n        }\r\n        let checkKey = keyIsBeyondCurrentEntry;\r\n        const c = new this.Collection(this, () => createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers));\r\n        c._ondirectionchange = direction => {\r\n            if (direction === \"next\") {\r\n                checkKey = keyIsBeyondCurrentEntry;\r\n                sortDirection = ascending;\r\n            }\r\n            else {\r\n                checkKey = keyIsBeforeCurrentEntry;\r\n                sortDirection = descending;\r\n            }\r\n            set.sort(rangeSorter);\r\n        };\r\n        c._addAlgorithm((cursor, advance, resolve) => {\r\n            var key = cursor.key;\r\n            while (checkKey(key)) {\r\n                ++rangePos;\r\n                if (rangePos === set.length) {\r\n                    advance(resolve);\r\n                    return false;\r\n                }\r\n            }\r\n            if (keyWithinCurrentRange(key)) {\r\n                return true;\r\n            }\r\n            else if (this._cmp(key, set[rangePos][1]) === 0 || this._cmp(key, set[rangePos][0]) === 0) {\r\n                return false;\r\n            }\r\n            else {\r\n                advance(() => {\r\n                    if (sortDirection === ascending)\r\n                        cursor.continue(set[rangePos][0]);\r\n                    else\r\n                        cursor.continue(set[rangePos][1]);\r\n                });\r\n                return false;\r\n            }\r\n        });\r\n        return c;\r\n    }\r\n    startsWithAnyOf() {\r\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\r\n        if (!set.every(s => typeof s === 'string')) {\r\n            return fail(this, \"startsWithAnyOf() only works with strings\");\r\n        }\r\n        if (set.length === 0)\r\n            return emptyCollection(this);\r\n        return this.inAnyRange(set.map((str) => [str, str + maxString]));\r\n    }\r\n}\r\n\r\nfunction createWhereClauseConstructor(db) {\r\n    return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\r\n        this.db = db;\r\n        this._ctx = {\r\n            table: table,\r\n            index: index === \":id\" ? null : index,\r\n            or: orCollection\r\n        };\r\n        const indexedDB = db._deps.indexedDB;\r\n        if (!indexedDB)\r\n            throw new exceptions.MissingAPI();\r\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\r\n        this._descending = (a, b) => indexedDB.cmp(b, a);\r\n        this._max = (a, b) => indexedDB.cmp(a, b) > 0 ? a : b;\r\n        this._min = (a, b) => indexedDB.cmp(a, b) < 0 ? a : b;\r\n        this._IDBKeyRange = db._deps.IDBKeyRange;\r\n    });\r\n}\r\n\r\nfunction eventRejectHandler(reject) {\r\n    return wrap(function (event) {\r\n        preventDefault(event);\r\n        reject(event.target.error);\r\n        return false;\r\n    });\r\n}\r\nfunction preventDefault(event) {\r\n    if (event.stopPropagation)\r\n        event.stopPropagation();\r\n    if (event.preventDefault)\r\n        event.preventDefault();\r\n}\r\n\r\nconst DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\r\nconst STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\r\nconst globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\r\n\r\nclass Transaction {\r\n    _lock() {\r\n        assert(!PSD.global);\r\n        ++this._reculock;\r\n        if (this._reculock === 1 && !PSD.global)\r\n            PSD.lockOwnerFor = this;\r\n        return this;\r\n    }\r\n    _unlock() {\r\n        assert(!PSD.global);\r\n        if (--this._reculock === 0) {\r\n            if (!PSD.global)\r\n                PSD.lockOwnerFor = null;\r\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\r\n                var fnAndPSD = this._blockedFuncs.shift();\r\n                try {\r\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\r\n                }\r\n                catch (e) { }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _locked() {\r\n        return this._reculock && PSD.lockOwnerFor !== this;\r\n    }\r\n    create(idbtrans) {\r\n        if (!this.mode)\r\n            return this;\r\n        const idbdb = this.db.idbdb;\r\n        const dbOpenError = this.db._state.dbOpenError;\r\n        assert(!this.idbtrans);\r\n        if (!idbtrans && !idbdb) {\r\n            switch (dbOpenError && dbOpenError.name) {\r\n                case \"DatabaseClosedError\":\r\n                    throw new exceptions.DatabaseClosed(dbOpenError);\r\n                case \"MissingAPIError\":\r\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\r\n                default:\r\n                    throw new exceptions.OpenFailed(dbOpenError);\r\n            }\r\n        }\r\n        if (!this.active)\r\n            throw new exceptions.TransactionInactive();\r\n        assert(this._completion._state === null);\r\n        idbtrans = this.idbtrans = idbtrans ||\r\n            (this.db.core\r\n                ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\r\n                : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\r\n        idbtrans.onerror = wrap(ev => {\r\n            preventDefault(ev);\r\n            this._reject(idbtrans.error);\r\n        });\r\n        idbtrans.onabort = wrap(ev => {\r\n            preventDefault(ev);\r\n            this.active && this._reject(new exceptions.Abort(idbtrans.error));\r\n            this.active = false;\r\n            this.on(\"abort\").fire(ev);\r\n        });\r\n        idbtrans.oncomplete = wrap(() => {\r\n            this.active = false;\r\n            this._resolve();\r\n            if ('mutatedParts' in idbtrans) {\r\n                globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n    _promise(mode, fn, bWriteLock) {\r\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\r\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\r\n        if (!this.active)\r\n            return rejection(new exceptions.TransactionInactive());\r\n        if (this._locked()) {\r\n            return new DexiePromise((resolve, reject) => {\r\n                this._blockedFuncs.push([() => {\r\n                        this._promise(mode, fn, bWriteLock).then(resolve, reject);\r\n                    }, PSD]);\r\n            });\r\n        }\r\n        else if (bWriteLock) {\r\n            return newScope(() => {\r\n                var p = new DexiePromise((resolve, reject) => {\r\n                    this._lock();\r\n                    const rv = fn(resolve, reject, this);\r\n                    if (rv && rv.then)\r\n                        rv.then(resolve, reject);\r\n                });\r\n                p.finally(() => this._unlock());\r\n                p._lib = true;\r\n                return p;\r\n            });\r\n        }\r\n        else {\r\n            var p = new DexiePromise((resolve, reject) => {\r\n                var rv = fn(resolve, reject, this);\r\n                if (rv && rv.then)\r\n                    rv.then(resolve, reject);\r\n            });\r\n            p._lib = true;\r\n            return p;\r\n        }\r\n    }\r\n    _root() {\r\n        return this.parent ? this.parent._root() : this;\r\n    }\r\n    waitFor(promiseLike) {\r\n        var root = this._root();\r\n        const promise = DexiePromise.resolve(promiseLike);\r\n        if (root._waitingFor) {\r\n            root._waitingFor = root._waitingFor.then(() => promise);\r\n        }\r\n        else {\r\n            root._waitingFor = promise;\r\n            root._waitingQueue = [];\r\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\r\n            (function spin() {\r\n                ++root._spinCount;\r\n                while (root._waitingQueue.length)\r\n                    (root._waitingQueue.shift())();\r\n                if (root._waitingFor)\r\n                    store.get(-Infinity).onsuccess = spin;\r\n            }());\r\n        }\r\n        var currentWaitPromise = root._waitingFor;\r\n        return new DexiePromise((resolve, reject) => {\r\n            promise.then(res => root._waitingQueue.push(wrap(resolve.bind(null, res))), err => root._waitingQueue.push(wrap(reject.bind(null, err)))).finally(() => {\r\n                if (root._waitingFor === currentWaitPromise) {\r\n                    root._waitingFor = null;\r\n                }\r\n            });\r\n        });\r\n    }\r\n    abort() {\r\n        if (this.active) {\r\n            this.active = false;\r\n            if (this.idbtrans)\r\n                this.idbtrans.abort();\r\n            this._reject(new exceptions.Abort());\r\n        }\r\n    }\r\n    table(tableName) {\r\n        const memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\r\n        if (hasOwn(memoizedTables, tableName))\r\n            return memoizedTables[tableName];\r\n        const tableSchema = this.schema[tableName];\r\n        if (!tableSchema) {\r\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\r\n        }\r\n        const transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\r\n        transactionBoundTable.core = this.db.core.table(tableName);\r\n        memoizedTables[tableName] = transactionBoundTable;\r\n        return transactionBoundTable;\r\n    }\r\n}\r\n\r\nfunction createTransactionConstructor(db) {\r\n    return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\r\n        this.db = db;\r\n        this.mode = mode;\r\n        this.storeNames = storeNames;\r\n        this.schema = dbschema;\r\n        this.chromeTransactionDurability = chromeTransactionDurability;\r\n        this.idbtrans = null;\r\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\r\n        this.parent = parent || null;\r\n        this.active = true;\r\n        this._reculock = 0;\r\n        this._blockedFuncs = [];\r\n        this._resolve = null;\r\n        this._reject = null;\r\n        this._waitingFor = null;\r\n        this._waitingQueue = null;\r\n        this._spinCount = 0;\r\n        this._completion = new DexiePromise((resolve, reject) => {\r\n            this._resolve = resolve;\r\n            this._reject = reject;\r\n        });\r\n        this._completion.then(() => {\r\n            this.active = false;\r\n            this.on.complete.fire();\r\n        }, e => {\r\n            var wasActive = this.active;\r\n            this.active = false;\r\n            this.on.error.fire(e);\r\n            this.parent ?\r\n                this.parent._reject(e) :\r\n                wasActive && this.idbtrans && this.idbtrans.abort();\r\n            return rejection(e);\r\n        });\r\n    });\r\n}\r\n\r\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\r\n    return {\r\n        name,\r\n        keyPath,\r\n        unique,\r\n        multi,\r\n        auto,\r\n        compound,\r\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\r\n    };\r\n}\r\nfunction nameFromKeyPath(keyPath) {\r\n    return typeof keyPath === 'string' ?\r\n        keyPath :\r\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\r\n}\r\n\r\nfunction createTableSchema(name, primKey, indexes) {\r\n    return {\r\n        name,\r\n        primKey,\r\n        indexes,\r\n        mappedClass: null,\r\n        idxByName: arrayToObject(indexes, index => [index.name, index])\r\n    };\r\n}\r\n\r\nfunction safariMultiStoreFix(storeNames) {\r\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\r\n}\r\nlet getMaxKey = (IdbKeyRange) => {\r\n    try {\r\n        IdbKeyRange.only([[]]);\r\n        getMaxKey = () => [[]];\r\n        return [[]];\r\n    }\r\n    catch (e) {\r\n        getMaxKey = () => maxString;\r\n        return maxString;\r\n    }\r\n};\r\n\r\nfunction getKeyExtractor(keyPath) {\r\n    if (keyPath == null) {\r\n        return () => undefined;\r\n    }\r\n    else if (typeof keyPath === 'string') {\r\n        return getSinglePathKeyExtractor(keyPath);\r\n    }\r\n    else {\r\n        return obj => getByKeyPath(obj, keyPath);\r\n    }\r\n}\r\nfunction getSinglePathKeyExtractor(keyPath) {\r\n    const split = keyPath.split('.');\r\n    if (split.length === 1) {\r\n        return obj => obj[keyPath];\r\n    }\r\n    else {\r\n        return obj => getByKeyPath(obj, keyPath);\r\n    }\r\n}\r\n\r\nfunction arrayify(arrayLike) {\r\n    return [].slice.call(arrayLike);\r\n}\r\nlet _id_counter = 0;\r\nfunction getKeyPathAlias(keyPath) {\r\n    return keyPath == null ?\r\n        \":id\" :\r\n        typeof keyPath === 'string' ?\r\n            keyPath :\r\n            `[${keyPath.join('+')}]`;\r\n}\r\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\r\n    function extractSchema(db, trans) {\r\n        const tables = arrayify(db.objectStoreNames);\r\n        return {\r\n            schema: {\r\n                name: db.name,\r\n                tables: tables.map(table => trans.objectStore(table)).map(store => {\r\n                    const { keyPath, autoIncrement } = store;\r\n                    const compound = isArray(keyPath);\r\n                    const outbound = keyPath == null;\r\n                    const indexByKeyPath = {};\r\n                    const result = {\r\n                        name: store.name,\r\n                        primaryKey: {\r\n                            name: null,\r\n                            isPrimaryKey: true,\r\n                            outbound,\r\n                            compound,\r\n                            keyPath,\r\n                            autoIncrement,\r\n                            unique: true,\r\n                            extractKey: getKeyExtractor(keyPath)\r\n                        },\r\n                        indexes: arrayify(store.indexNames).map(indexName => store.index(indexName))\r\n                            .map(index => {\r\n                            const { name, unique, multiEntry, keyPath } = index;\r\n                            const compound = isArray(keyPath);\r\n                            const result = {\r\n                                name,\r\n                                compound,\r\n                                keyPath,\r\n                                unique,\r\n                                multiEntry,\r\n                                extractKey: getKeyExtractor(keyPath)\r\n                            };\r\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\r\n                            return result;\r\n                        }),\r\n                        getIndexByKeyPath: (keyPath) => indexByKeyPath[getKeyPathAlias(keyPath)]\r\n                    };\r\n                    indexByKeyPath[\":id\"] = result.primaryKey;\r\n                    if (keyPath != null) {\r\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\r\n                    }\r\n                    return result;\r\n                })\r\n            },\r\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\r\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\r\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\r\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\r\n        };\r\n    }\r\n    function makeIDBKeyRange(range) {\r\n        if (range.type === 3 )\r\n            return null;\r\n        if (range.type === 4 )\r\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\r\n        const { lower, upper, lowerOpen, upperOpen } = range;\r\n        const idbRange = lower === undefined ?\r\n            upper === undefined ?\r\n                null :\r\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\r\n            upper === undefined ?\r\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\r\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\r\n        return idbRange;\r\n    }\r\n    function createDbCoreTable(tableSchema) {\r\n        const tableName = tableSchema.name;\r\n        function mutate({ trans, type, keys, values, range }) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve = wrap(resolve);\r\n                const store = trans.objectStore(tableName);\r\n                const outbound = store.keyPath == null;\r\n                const isAddOrPut = type === \"put\" || type === \"add\";\r\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\r\n                    throw new Error(\"Invalid operation type: \" + type);\r\n                const { length } = keys || values || { length: 1 };\r\n                if (keys && values && keys.length !== values.length) {\r\n                    throw new Error(\"Given keys array must have same length as given values array.\");\r\n                }\r\n                if (length === 0)\r\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\r\n                let req;\r\n                const reqs = [];\r\n                const failures = [];\r\n                let numFailures = 0;\r\n                const errorHandler = event => {\r\n                    ++numFailures;\r\n                    preventDefault(event);\r\n                };\r\n                if (type === 'deleteRange') {\r\n                    if (range.type === 4 )\r\n                        return resolve({ numFailures, failures, results: [], lastResult: undefined });\r\n                    if (range.type === 3 )\r\n                        reqs.push(req = store.clear());\r\n                    else\r\n                        reqs.push(req = store.delete(makeIDBKeyRange(range)));\r\n                }\r\n                else {\r\n                    const [args1, args2] = isAddOrPut ?\r\n                        outbound ?\r\n                            [values, keys] :\r\n                            [values, null] :\r\n                        [keys, null];\r\n                    if (isAddOrPut) {\r\n                        for (let i = 0; i < length; ++i) {\r\n                            reqs.push(req = (args2 && args2[i] !== undefined ?\r\n                                store[type](args1[i], args2[i]) :\r\n                                store[type](args1[i])));\r\n                            req.onerror = errorHandler;\r\n                        }\r\n                    }\r\n                    else {\r\n                        for (let i = 0; i < length; ++i) {\r\n                            reqs.push(req = store[type](args1[i]));\r\n                            req.onerror = errorHandler;\r\n                        }\r\n                    }\r\n                }\r\n                const done = event => {\r\n                    const lastResult = event.target.result;\r\n                    reqs.forEach((req, i) => req.error != null && (failures[i] = req.error));\r\n                    resolve({\r\n                        numFailures,\r\n                        failures,\r\n                        results: type === \"delete\" ? keys : reqs.map(req => req.result),\r\n                        lastResult\r\n                    });\r\n                };\r\n                req.onerror = event => {\r\n                    errorHandler(event);\r\n                    done(event);\r\n                };\r\n                req.onsuccess = done;\r\n            });\r\n        }\r\n        function openCursor({ trans, values, query, reverse, unique }) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve = wrap(resolve);\r\n                const { index, range } = query;\r\n                const store = trans.objectStore(tableName);\r\n                const source = index.isPrimaryKey ?\r\n                    store :\r\n                    store.index(index.name);\r\n                const direction = reverse ?\r\n                    unique ?\r\n                        \"prevunique\" :\r\n                        \"prev\" :\r\n                    unique ?\r\n                        \"nextunique\" :\r\n                        \"next\";\r\n                const req = values || !('openKeyCursor' in source) ?\r\n                    source.openCursor(makeIDBKeyRange(range), direction) :\r\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\r\n                req.onerror = eventRejectHandler(reject);\r\n                req.onsuccess = wrap(ev => {\r\n                    const cursor = req.result;\r\n                    if (!cursor) {\r\n                        resolve(null);\r\n                        return;\r\n                    }\r\n                    cursor.___id = ++_id_counter;\r\n                    cursor.done = false;\r\n                    const _cursorContinue = cursor.continue.bind(cursor);\r\n                    let _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\r\n                    if (_cursorContinuePrimaryKey)\r\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\r\n                    const _cursorAdvance = cursor.advance.bind(cursor);\r\n                    const doThrowCursorIsNotStarted = () => { throw new Error(\"Cursor not started\"); };\r\n                    const doThrowCursorIsStopped = () => { throw new Error(\"Cursor not stopped\"); };\r\n                    cursor.trans = trans;\r\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\r\n                    cursor.fail = wrap(reject);\r\n                    cursor.next = function () {\r\n                        let gotOne = 1;\r\n                        return this.start(() => gotOne-- ? this.continue() : this.stop()).then(() => this);\r\n                    };\r\n                    cursor.start = (callback) => {\r\n                        const iterationPromise = new Promise((resolveIteration, rejectIteration) => {\r\n                            resolveIteration = wrap(resolveIteration);\r\n                            req.onerror = eventRejectHandler(rejectIteration);\r\n                            cursor.fail = rejectIteration;\r\n                            cursor.stop = value => {\r\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\r\n                                resolveIteration(value);\r\n                            };\r\n                        });\r\n                        const guardedCallback = () => {\r\n                            if (req.result) {\r\n                                try {\r\n                                    callback();\r\n                                }\r\n                                catch (err) {\r\n                                    cursor.fail(err);\r\n                                }\r\n                            }\r\n                            else {\r\n                                cursor.done = true;\r\n                                cursor.start = () => { throw new Error(\"Cursor behind last entry\"); };\r\n                                cursor.stop();\r\n                            }\r\n                        };\r\n                        req.onsuccess = wrap(ev => {\r\n                            req.onsuccess = guardedCallback;\r\n                            guardedCallback();\r\n                        });\r\n                        cursor.continue = _cursorContinue;\r\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\r\n                        cursor.advance = _cursorAdvance;\r\n                        guardedCallback();\r\n                        return iterationPromise;\r\n                    };\r\n                    resolve(cursor);\r\n                }, reject);\r\n            });\r\n        }\r\n        function query(hasGetAll) {\r\n            return (request) => {\r\n                return new Promise((resolve, reject) => {\r\n                    resolve = wrap(resolve);\r\n                    const { trans, values, limit, query } = request;\r\n                    const nonInfinitLimit = limit === Infinity ? undefined : limit;\r\n                    const { index, range } = query;\r\n                    const store = trans.objectStore(tableName);\r\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\r\n                    const idbKeyRange = makeIDBKeyRange(range);\r\n                    if (limit === 0)\r\n                        return resolve({ result: [] });\r\n                    if (hasGetAll) {\r\n                        const req = values ?\r\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\r\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\r\n                        req.onsuccess = event => resolve({ result: event.target.result });\r\n                        req.onerror = eventRejectHandler(reject);\r\n                    }\r\n                    else {\r\n                        let count = 0;\r\n                        const req = values || !('openKeyCursor' in source) ?\r\n                            source.openCursor(idbKeyRange) :\r\n                            source.openKeyCursor(idbKeyRange);\r\n                        const result = [];\r\n                        req.onsuccess = event => {\r\n                            const cursor = req.result;\r\n                            if (!cursor)\r\n                                return resolve({ result });\r\n                            result.push(values ? cursor.value : cursor.primaryKey);\r\n                            if (++count === limit)\r\n                                return resolve({ result });\r\n                            cursor.continue();\r\n                        };\r\n                        req.onerror = eventRejectHandler(reject);\r\n                    }\r\n                });\r\n            };\r\n        }\r\n        return {\r\n            name: tableName,\r\n            schema: tableSchema,\r\n            mutate,\r\n            getMany({ trans, keys }) {\r\n                return new Promise((resolve, reject) => {\r\n                    resolve = wrap(resolve);\r\n                    const store = trans.objectStore(tableName);\r\n                    const length = keys.length;\r\n                    const result = new Array(length);\r\n                    let keyCount = 0;\r\n                    let callbackCount = 0;\r\n                    let req;\r\n                    const successHandler = event => {\r\n                        const req = event.target;\r\n                        if ((result[req._pos] = req.result) != null)\r\n                            ;\r\n                        if (++callbackCount === keyCount)\r\n                            resolve(result);\r\n                    };\r\n                    const errorHandler = eventRejectHandler(reject);\r\n                    for (let i = 0; i < length; ++i) {\r\n                        const key = keys[i];\r\n                        if (key != null) {\r\n                            req = store.get(keys[i]);\r\n                            req._pos = i;\r\n                            req.onsuccess = successHandler;\r\n                            req.onerror = errorHandler;\r\n                            ++keyCount;\r\n                        }\r\n                    }\r\n                    if (keyCount === 0)\r\n                        resolve(result);\r\n                });\r\n            },\r\n            get({ trans, key }) {\r\n                return new Promise((resolve, reject) => {\r\n                    resolve = wrap(resolve);\r\n                    const store = trans.objectStore(tableName);\r\n                    const req = store.get(key);\r\n                    req.onsuccess = event => resolve(event.target.result);\r\n                    req.onerror = eventRejectHandler(reject);\r\n                });\r\n            },\r\n            query: query(hasGetAll),\r\n            openCursor,\r\n            count({ query, trans }) {\r\n                const { index, range } = query;\r\n                return new Promise((resolve, reject) => {\r\n                    const store = trans.objectStore(tableName);\r\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\r\n                    const idbKeyRange = makeIDBKeyRange(range);\r\n                    const req = idbKeyRange ? source.count(idbKeyRange) : source.count();\r\n                    req.onsuccess = wrap(ev => resolve(ev.target.result));\r\n                    req.onerror = eventRejectHandler(reject);\r\n                });\r\n            }\r\n        };\r\n    }\r\n    const { schema, hasGetAll } = extractSchema(db, tmpTrans);\r\n    const tables = schema.tables.map(tableSchema => createDbCoreTable(tableSchema));\r\n    const tableMap = {};\r\n    tables.forEach(table => tableMap[table.name] = table);\r\n    return {\r\n        stack: \"dbcore\",\r\n        transaction: db.transaction.bind(db),\r\n        table(name) {\r\n            const result = tableMap[name];\r\n            if (!result)\r\n                throw new Error(`Table '${name}' not found`);\r\n            return tableMap[name];\r\n        },\r\n        MIN_KEY: -Infinity,\r\n        MAX_KEY: getMaxKey(IdbKeyRange),\r\n        schema\r\n    };\r\n}\r\n\r\nfunction createMiddlewareStack(stackImpl, middlewares) {\r\n    return middlewares.reduce((down, { create }) => ({ ...down, ...create(down) }), stackImpl);\r\n}\r\nfunction createMiddlewareStacks(middlewares, idbdb, { IDBKeyRange, indexedDB }, tmpTrans) {\r\n    const dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\r\n    return {\r\n        dbcore\r\n    };\r\n}\r\nfunction generateMiddlewareStacks({ _novip: db }, tmpTrans) {\r\n    const idbdb = tmpTrans.db;\r\n    const stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\r\n    db.core = stacks.dbcore;\r\n    db.tables.forEach(table => {\r\n        const tableName = table.name;\r\n        if (db.core.schema.tables.some(tbl => tbl.name === tableName)) {\r\n            table.core = db.core.table(tableName);\r\n            if (db[tableName] instanceof db.Table) {\r\n                db[tableName].core = table.core;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction setApiOnPlace({ _novip: db }, objs, tableNames, dbschema) {\r\n    tableNames.forEach(tableName => {\r\n        const schema = dbschema[tableName];\r\n        objs.forEach(obj => {\r\n            const propDesc = getPropertyDescriptor(obj, tableName);\r\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\r\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\r\n                    setProp(obj, tableName, {\r\n                        get() { return this.table(tableName); },\r\n                        set(value) {\r\n                            defineProperty(this, tableName, { value, writable: true, configurable: true, enumerable: true });\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    obj[tableName] = new db.Table(tableName, schema);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction removeTablesApi({ _novip: db }, objs) {\r\n    objs.forEach(obj => {\r\n        for (let key in obj) {\r\n            if (obj[key] instanceof db.Table)\r\n                delete obj[key];\r\n        }\r\n    });\r\n}\r\nfunction lowerVersionFirst(a, b) {\r\n    return a._cfg.version - b._cfg.version;\r\n}\r\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\r\n    const globalSchema = db._dbSchema;\r\n    const trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\r\n    trans.create(idbUpgradeTrans);\r\n    trans._completion.catch(reject);\r\n    const rejectTransaction = trans._reject.bind(trans);\r\n    const transless = PSD.transless || PSD;\r\n    newScope(() => {\r\n        PSD.trans = trans;\r\n        PSD.transless = transless;\r\n        if (oldVersion === 0) {\r\n            keys(globalSchema).forEach(tableName => {\r\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\r\n            });\r\n            generateMiddlewareStacks(db, idbUpgradeTrans);\r\n            DexiePromise.follow(() => db.on.populate.fire(trans)).catch(rejectTransaction);\r\n        }\r\n        else\r\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\r\n    });\r\n}\r\nfunction updateTablesAndIndexes({ _novip: db }, oldVersion, trans, idbUpgradeTrans) {\r\n    const queue = [];\r\n    const versions = db._versions;\r\n    let globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\r\n    let anyContentUpgraderHasRun = false;\r\n    const versToRun = versions.filter(v => v._cfg.version >= oldVersion);\r\n    versToRun.forEach(version => {\r\n        queue.push(() => {\r\n            const oldSchema = globalSchema;\r\n            const newSchema = version._cfg.dbschema;\r\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\r\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\r\n            globalSchema = db._dbSchema = newSchema;\r\n            const diff = getSchemaDiff(oldSchema, newSchema);\r\n            diff.add.forEach(tuple => {\r\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\r\n            });\r\n            diff.change.forEach(change => {\r\n                if (change.recreate) {\r\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\r\n                }\r\n                else {\r\n                    const store = idbUpgradeTrans.objectStore(change.name);\r\n                    change.add.forEach(idx => addIndex(store, idx));\r\n                    change.change.forEach(idx => {\r\n                        store.deleteIndex(idx.name);\r\n                        addIndex(store, idx);\r\n                    });\r\n                    change.del.forEach(idxName => store.deleteIndex(idxName));\r\n                }\r\n            });\r\n            const contentUpgrade = version._cfg.contentUpgrade;\r\n            if (contentUpgrade && version._cfg.version > oldVersion) {\r\n                generateMiddlewareStacks(db, idbUpgradeTrans);\r\n                trans._memoizedTables = {};\r\n                anyContentUpgraderHasRun = true;\r\n                let upgradeSchema = shallowClone(newSchema);\r\n                diff.del.forEach(table => {\r\n                    upgradeSchema[table] = oldSchema[table];\r\n                });\r\n                removeTablesApi(db, [db.Transaction.prototype]);\r\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\r\n                trans.schema = upgradeSchema;\r\n                const contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\r\n                if (contentUpgradeIsAsync) {\r\n                    incrementExpectedAwaits();\r\n                }\r\n                let returnValue;\r\n                const promiseFollowed = DexiePromise.follow(() => {\r\n                    returnValue = contentUpgrade(trans);\r\n                    if (returnValue) {\r\n                        if (contentUpgradeIsAsync) {\r\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\r\n                            returnValue.then(decrementor, decrementor);\r\n                        }\r\n                    }\r\n                });\r\n                return (returnValue && typeof returnValue.then === 'function' ?\r\n                    DexiePromise.resolve(returnValue) : promiseFollowed.then(() => returnValue));\r\n            }\r\n        });\r\n        queue.push(idbtrans => {\r\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\r\n                const newSchema = version._cfg.dbschema;\r\n                deleteRemovedTables(newSchema, idbtrans);\r\n            }\r\n            removeTablesApi(db, [db.Transaction.prototype]);\r\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\r\n            trans.schema = db._dbSchema;\r\n        });\r\n    });\r\n    function runQueue() {\r\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\r\n            DexiePromise.resolve();\r\n    }\r\n    return runQueue().then(() => {\r\n        createMissingTables(globalSchema, idbUpgradeTrans);\r\n    });\r\n}\r\nfunction getSchemaDiff(oldSchema, newSchema) {\r\n    const diff = {\r\n        del: [],\r\n        add: [],\r\n        change: []\r\n    };\r\n    let table;\r\n    for (table in oldSchema) {\r\n        if (!newSchema[table])\r\n            diff.del.push(table);\r\n    }\r\n    for (table in newSchema) {\r\n        const oldDef = oldSchema[table], newDef = newSchema[table];\r\n        if (!oldDef) {\r\n            diff.add.push([table, newDef]);\r\n        }\r\n        else {\r\n            const change = {\r\n                name: table,\r\n                def: newDef,\r\n                recreate: false,\r\n                del: [],\r\n                add: [],\r\n                change: []\r\n            };\r\n            if ((\r\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\r\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\r\n             {\r\n                change.recreate = true;\r\n                diff.change.push(change);\r\n            }\r\n            else {\r\n                const oldIndexes = oldDef.idxByName;\r\n                const newIndexes = newDef.idxByName;\r\n                let idxName;\r\n                for (idxName in oldIndexes) {\r\n                    if (!newIndexes[idxName])\r\n                        change.del.push(idxName);\r\n                }\r\n                for (idxName in newIndexes) {\r\n                    const oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\r\n                    if (!oldIdx)\r\n                        change.add.push(newIdx);\r\n                    else if (oldIdx.src !== newIdx.src)\r\n                        change.change.push(newIdx);\r\n                }\r\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\r\n                    diff.change.push(change);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return diff;\r\n}\r\nfunction createTable(idbtrans, tableName, primKey, indexes) {\r\n    const store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\r\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\r\n        { autoIncrement: primKey.auto });\r\n    indexes.forEach(idx => addIndex(store, idx));\r\n    return store;\r\n}\r\nfunction createMissingTables(newSchema, idbtrans) {\r\n    keys(newSchema).forEach(tableName => {\r\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\r\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\r\n        }\r\n    });\r\n}\r\nfunction deleteRemovedTables(newSchema, idbtrans) {\r\n    [].slice.call(idbtrans.db.objectStoreNames).forEach(storeName => newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName));\r\n}\r\nfunction addIndex(store, idx) {\r\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\r\n}\r\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\r\n    const globalSchema = {};\r\n    const dbStoreNames = slice(idbdb.objectStoreNames, 0);\r\n    dbStoreNames.forEach(storeName => {\r\n        const store = tmpTrans.objectStore(storeName);\r\n        let keyPath = store.keyPath;\r\n        const primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\r\n        const indexes = [];\r\n        for (let j = 0; j < store.indexNames.length; ++j) {\r\n            const idbindex = store.index(store.indexNames[j]);\r\n            keyPath = idbindex.keyPath;\r\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\r\n            indexes.push(index);\r\n        }\r\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\r\n    });\r\n    return globalSchema;\r\n}\r\nfunction readGlobalSchema({ _novip: db }, idbdb, tmpTrans) {\r\n    db.verno = idbdb.version / 10;\r\n    const globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\r\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\r\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\r\n}\r\nfunction verifyInstalledSchema(db, tmpTrans) {\r\n    const installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\r\n    const diff = getSchemaDiff(installedSchema, db._dbSchema);\r\n    return !(diff.add.length || diff.change.some(ch => ch.add.length || ch.change.length));\r\n}\r\nfunction adjustToExistingIndexNames({ _novip: db }, schema, idbtrans) {\r\n    const storeNames = idbtrans.db.objectStoreNames;\r\n    for (let i = 0; i < storeNames.length; ++i) {\r\n        const storeName = storeNames[i];\r\n        const store = idbtrans.objectStore(storeName);\r\n        db._hasGetAll = 'getAll' in store;\r\n        for (let j = 0; j < store.indexNames.length; ++j) {\r\n            const indexName = store.indexNames[j];\r\n            const keyPath = store.index(indexName).keyPath;\r\n            const dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\r\n            if (schema[storeName]) {\r\n                const indexSpec = schema[storeName].idxByName[dexieName];\r\n                if (indexSpec) {\r\n                    indexSpec.name = indexName;\r\n                    delete schema[storeName].idxByName[dexieName];\r\n                    schema[storeName].idxByName[indexName] = indexSpec;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\r\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\r\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\r\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\r\n        db._hasGetAll = false;\r\n    }\r\n}\r\nfunction parseIndexSyntax(primKeyAndIndexes) {\r\n    return primKeyAndIndexes.split(',').map((index, indexNum) => {\r\n        index = index.trim();\r\n        const name = index.replace(/([&*]|\\+\\+)/g, \"\");\r\n        const keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\r\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\r\n    });\r\n}\r\n\r\nclass Version {\r\n    _parseStoresSpec(stores, outSchema) {\r\n        keys(stores).forEach(tableName => {\r\n            if (stores[tableName] !== null) {\r\n                var indexes = parseIndexSyntax(stores[tableName]);\r\n                var primKey = indexes.shift();\r\n                if (primKey.multi)\r\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\r\n                indexes.forEach(idx => {\r\n                    if (idx.auto)\r\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\r\n                    if (!idx.keyPath)\r\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\r\n                });\r\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\r\n            }\r\n        });\r\n    }\r\n    stores(stores) {\r\n        const db = this.db;\r\n        this._cfg.storesSource = this._cfg.storesSource ?\r\n            extend(this._cfg.storesSource, stores) :\r\n            stores;\r\n        const versions = db._versions;\r\n        const storesSpec = {};\r\n        let dbschema = {};\r\n        versions.forEach(version => {\r\n            extend(storesSpec, version._cfg.storesSource);\r\n            dbschema = (version._cfg.dbschema = {});\r\n            version._parseStoresSpec(storesSpec, dbschema);\r\n        });\r\n        db._dbSchema = dbschema;\r\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\r\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\r\n        db._storeNames = keys(dbschema);\r\n        return this;\r\n    }\r\n    upgrade(upgradeFunction) {\r\n        this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\r\n        return this;\r\n    }\r\n}\r\n\r\nfunction createVersionConstructor(db) {\r\n    return makeClassConstructor(Version.prototype, function Version(versionNumber) {\r\n        this.db = db;\r\n        this._cfg = {\r\n            version: versionNumber,\r\n            storesSource: null,\r\n            dbschema: {},\r\n            tables: {},\r\n            contentUpgrade: null\r\n        };\r\n    });\r\n}\r\n\r\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\r\n    let dbNamesDB = indexedDB[\"_dbNamesDB\"];\r\n    if (!dbNamesDB) {\r\n        dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\r\n            addons: [],\r\n            indexedDB,\r\n            IDBKeyRange,\r\n        });\r\n        dbNamesDB.version(1).stores({ dbnames: \"name\" });\r\n    }\r\n    return dbNamesDB.table(\"dbnames\");\r\n}\r\nfunction hasDatabasesNative(indexedDB) {\r\n    return indexedDB && typeof indexedDB.databases === \"function\";\r\n}\r\nfunction getDatabaseNames({ indexedDB, IDBKeyRange, }) {\r\n    return hasDatabasesNative(indexedDB)\r\n        ? Promise.resolve(indexedDB.databases()).then((infos) => infos\r\n            .map((info) => info.name)\r\n            .filter((name) => name !== DBNAMES_DB))\r\n        : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\r\n}\r\nfunction _onDatabaseCreated({ indexedDB, IDBKeyRange }, name) {\r\n    !hasDatabasesNative(indexedDB) &&\r\n        name !== DBNAMES_DB &&\r\n        getDbNamesTable(indexedDB, IDBKeyRange).put({ name }).catch(nop);\r\n}\r\nfunction _onDatabaseDeleted({ indexedDB, IDBKeyRange }, name) {\r\n    !hasDatabasesNative(indexedDB) &&\r\n        name !== DBNAMES_DB &&\r\n        getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\r\n}\r\n\r\nfunction vip(fn) {\r\n    return newScope(function () {\r\n        PSD.letThrough = true;\r\n        return fn();\r\n    });\r\n}\r\n\r\nfunction idbReady() {\r\n    var isSafari = !navigator.userAgentData &&\r\n        /Safari\\//.test(navigator.userAgent) &&\r\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\r\n    if (!isSafari || !indexedDB.databases)\r\n        return Promise.resolve();\r\n    var intervalId;\r\n    return new Promise(function (resolve) {\r\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\r\n        intervalId = setInterval(tryIdb, 100);\r\n        tryIdb();\r\n    }).finally(function () { return clearInterval(intervalId); });\r\n}\r\n\r\nfunction dexieOpen(db) {\r\n    const state = db._state;\r\n    const { indexedDB } = db._deps;\r\n    if (state.isBeingOpened || db.idbdb)\r\n        return state.dbReadyPromise.then(() => state.dbOpenError ?\r\n            rejection(state.dbOpenError) :\r\n            db);\r\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\r\n    state.isBeingOpened = true;\r\n    state.dbOpenError = null;\r\n    state.openComplete = false;\r\n    const openCanceller = state.openCanceller;\r\n    function throwIfCancelled() {\r\n        if (state.openCanceller !== openCanceller)\r\n            throw new exceptions.DatabaseClosed('db.open() was cancelled');\r\n    }\r\n    let resolveDbReady = state.dbReadyResolve,\r\n    upgradeTransaction = null, wasCreated = false;\r\n    const tryOpenDB = () => new DexiePromise((resolve, reject) => {\r\n        throwIfCancelled();\r\n        if (!indexedDB)\r\n            throw new exceptions.MissingAPI();\r\n        const dbName = db.name;\r\n        const req = state.autoSchema ?\r\n            indexedDB.open(dbName) :\r\n            indexedDB.open(dbName, Math.round(db.verno * 10));\r\n        if (!req)\r\n            throw new exceptions.MissingAPI();\r\n        req.onerror = eventRejectHandler(reject);\r\n        req.onblocked = wrap(db._fireOnBlocked);\r\n        req.onupgradeneeded = wrap(e => {\r\n            upgradeTransaction = req.transaction;\r\n            if (state.autoSchema && !db._options.allowEmptyDB) {\r\n                req.onerror = preventDefault;\r\n                upgradeTransaction.abort();\r\n                req.result.close();\r\n                const delreq = indexedDB.deleteDatabase(dbName);\r\n                delreq.onsuccess = delreq.onerror = wrap(() => {\r\n                    reject(new exceptions.NoSuchDatabase(`Database ${dbName} doesnt exist`));\r\n                });\r\n            }\r\n            else {\r\n                upgradeTransaction.onerror = eventRejectHandler(reject);\r\n                var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\r\n                wasCreated = oldVer < 1;\r\n                db._novip.idbdb = req.result;\r\n                runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\r\n            }\r\n        }, reject);\r\n        req.onsuccess = wrap(() => {\r\n            upgradeTransaction = null;\r\n            const idbdb = db._novip.idbdb = req.result;\r\n            const objectStoreNames = slice(idbdb.objectStoreNames);\r\n            if (objectStoreNames.length > 0)\r\n                try {\r\n                    const tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\r\n                    if (state.autoSchema)\r\n                        readGlobalSchema(db, idbdb, tmpTrans);\r\n                    else {\r\n                        adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\r\n                        if (!verifyInstalledSchema(db, tmpTrans)) {\r\n                            console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`);\r\n                        }\r\n                    }\r\n                    generateMiddlewareStacks(db, tmpTrans);\r\n                }\r\n                catch (e) {\r\n                }\r\n            connections.push(db);\r\n            idbdb.onversionchange = wrap(ev => {\r\n                state.vcFired = true;\r\n                db.on(\"versionchange\").fire(ev);\r\n            });\r\n            idbdb.onclose = wrap(ev => {\r\n                db.on(\"close\").fire(ev);\r\n            });\r\n            if (wasCreated)\r\n                _onDatabaseCreated(db._deps, dbName);\r\n            resolve();\r\n        }, reject);\r\n    }).catch(err => {\r\n        if (err && err.name === 'UnknownError' && state.PR1398_maxLoop > 0) {\r\n            state.PR1398_maxLoop--;\r\n            console.warn('Dexie: Workaround for Chrome UnknownError on open()');\r\n            return tryOpenDB();\r\n        }\r\n        else {\r\n            return DexiePromise.reject(err);\r\n        }\r\n    });\r\n    return DexiePromise.race([\r\n        openCanceller,\r\n        (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)\r\n    ]).then(() => {\r\n        throwIfCancelled();\r\n        state.onReadyBeingFired = [];\r\n        return DexiePromise.resolve(vip(() => db.on.ready.fire(db.vip))).then(function fireRemainders() {\r\n            if (state.onReadyBeingFired.length > 0) {\r\n                let remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\r\n                state.onReadyBeingFired = [];\r\n                return DexiePromise.resolve(vip(() => remainders(db.vip))).then(fireRemainders);\r\n            }\r\n        });\r\n    }).finally(() => {\r\n        state.onReadyBeingFired = null;\r\n        state.isBeingOpened = false;\r\n    }).then(() => {\r\n        return db;\r\n    }).catch(err => {\r\n        state.dbOpenError = err;\r\n        try {\r\n            upgradeTransaction && upgradeTransaction.abort();\r\n        }\r\n        catch (_a) { }\r\n        if (openCanceller === state.openCanceller) {\r\n            db._close();\r\n        }\r\n        return rejection(err);\r\n    }).finally(() => {\r\n        state.openComplete = true;\r\n        resolveDbReady();\r\n    });\r\n}\r\n\r\nfunction awaitIterator(iterator) {\r\n    var callNext = result => iterator.next(result), doThrow = error => iterator.throw(error), onSuccess = step(callNext), onError = step(doThrow);\r\n    function step(getNext) {\r\n        return (val) => {\r\n            var next = getNext(val), value = next.value;\r\n            return next.done ? value :\r\n                (!value || typeof value.then !== 'function' ?\r\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\r\n                    value.then(onSuccess, onError));\r\n        };\r\n    }\r\n    return step(callNext)();\r\n}\r\n\r\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\r\n    var i = arguments.length;\r\n    if (i < 2)\r\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\r\n    var args = new Array(i - 1);\r\n    while (--i)\r\n        args[i - 1] = arguments[i];\r\n    scopeFunc = args.pop();\r\n    var tables = flatten(args);\r\n    return [mode, tables, scopeFunc];\r\n}\r\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\r\n    return DexiePromise.resolve().then(() => {\r\n        const transless = PSD.transless || PSD;\r\n        const trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\r\n        const zoneProps = {\r\n            trans: trans,\r\n            transless: transless\r\n        };\r\n        if (parentTransaction) {\r\n            trans.idbtrans = parentTransaction.idbtrans;\r\n        }\r\n        else {\r\n            try {\r\n                trans.create();\r\n                db._state.PR1398_maxLoop = 3;\r\n            }\r\n            catch (ex) {\r\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\r\n                    console.warn('Dexie: Need to reopen db');\r\n                    db._close();\r\n                    return db.open().then(() => enterTransactionScope(db, mode, storeNames, null, scopeFunc));\r\n                }\r\n                return rejection(ex);\r\n            }\r\n        }\r\n        const scopeFuncIsAsync = isAsyncFunction(scopeFunc);\r\n        if (scopeFuncIsAsync) {\r\n            incrementExpectedAwaits();\r\n        }\r\n        let returnValue;\r\n        const promiseFollowed = DexiePromise.follow(() => {\r\n            returnValue = scopeFunc.call(trans, trans);\r\n            if (returnValue) {\r\n                if (scopeFuncIsAsync) {\r\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\r\n                    returnValue.then(decrementor, decrementor);\r\n                }\r\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\r\n                    returnValue = awaitIterator(returnValue);\r\n                }\r\n            }\r\n        }, zoneProps);\r\n        return (returnValue && typeof returnValue.then === 'function' ?\r\n            DexiePromise.resolve(returnValue).then(x => trans.active ?\r\n                x\r\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))\r\n            : promiseFollowed.then(() => returnValue)).then(x => {\r\n            if (parentTransaction)\r\n                trans._resolve();\r\n            return trans._completion.then(() => x);\r\n        }).catch(e => {\r\n            trans._reject(e);\r\n            return rejection(e);\r\n        });\r\n    });\r\n}\r\n\r\nfunction pad(a, value, count) {\r\n    const result = isArray(a) ? a.slice() : [a];\r\n    for (let i = 0; i < count; ++i)\r\n        result.push(value);\r\n    return result;\r\n}\r\nfunction createVirtualIndexMiddleware(down) {\r\n    return {\r\n        ...down,\r\n        table(tableName) {\r\n            const table = down.table(tableName);\r\n            const { schema } = table;\r\n            const indexLookup = {};\r\n            const allVirtualIndexes = [];\r\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\r\n                const keyPathAlias = getKeyPathAlias(keyPath);\r\n                const indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\r\n                const keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\r\n                const isVirtual = keyTail > 0;\r\n                const virtualIndex = {\r\n                    ...lowLevelIndex,\r\n                    isVirtual,\r\n                    keyTail,\r\n                    keyLength,\r\n                    extractKey: getKeyExtractor(keyPath),\r\n                    unique: !isVirtual && lowLevelIndex.unique\r\n                };\r\n                indexList.push(virtualIndex);\r\n                if (!virtualIndex.isPrimaryKey) {\r\n                    allVirtualIndexes.push(virtualIndex);\r\n                }\r\n                if (keyLength > 1) {\r\n                    const virtualKeyPath = keyLength === 2 ?\r\n                        keyPath[0] :\r\n                        keyPath.slice(0, keyLength - 1);\r\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\r\n                }\r\n                indexList.sort((a, b) => a.keyTail - b.keyTail);\r\n                return virtualIndex;\r\n            }\r\n            const primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\r\n            indexLookup[\":id\"] = [primaryKey];\r\n            for (const index of schema.indexes) {\r\n                addVirtualIndexes(index.keyPath, 0, index);\r\n            }\r\n            function findBestIndex(keyPath) {\r\n                const result = indexLookup[getKeyPathAlias(keyPath)];\r\n                return result && result[0];\r\n            }\r\n            function translateRange(range, keyTail) {\r\n                return {\r\n                    type: range.type === 1  ?\r\n                        2  :\r\n                        range.type,\r\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\r\n                    lowerOpen: true,\r\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\r\n                    upperOpen: true\r\n                };\r\n            }\r\n            function translateRequest(req) {\r\n                const index = req.query.index;\r\n                return index.isVirtual ? {\r\n                    ...req,\r\n                    query: {\r\n                        index,\r\n                        range: translateRange(req.query.range, index.keyTail)\r\n                    }\r\n                } : req;\r\n            }\r\n            const result = {\r\n                ...table,\r\n                schema: {\r\n                    ...schema,\r\n                    primaryKey,\r\n                    indexes: allVirtualIndexes,\r\n                    getIndexByKeyPath: findBestIndex\r\n                },\r\n                count(req) {\r\n                    return table.count(translateRequest(req));\r\n                },\r\n                query(req) {\r\n                    return table.query(translateRequest(req));\r\n                },\r\n                openCursor(req) {\r\n                    const { keyTail, isVirtual, keyLength } = req.query.index;\r\n                    if (!isVirtual)\r\n                        return table.openCursor(req);\r\n                    function createVirtualCursor(cursor) {\r\n                        function _continue(key) {\r\n                            key != null ?\r\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\r\n                                req.unique ?\r\n                                    cursor.continue(cursor.key.slice(0, keyLength)\r\n                                        .concat(req.reverse\r\n                                        ? down.MIN_KEY\r\n                                        : down.MAX_KEY, keyTail)) :\r\n                                    cursor.continue();\r\n                        }\r\n                        const virtualCursor = Object.create(cursor, {\r\n                            continue: { value: _continue },\r\n                            continuePrimaryKey: {\r\n                                value(key, primaryKey) {\r\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\r\n                                }\r\n                            },\r\n                            primaryKey: {\r\n                                get() {\r\n                                    return cursor.primaryKey;\r\n                                }\r\n                            },\r\n                            key: {\r\n                                get() {\r\n                                    const key = cursor.key;\r\n                                    return keyLength === 1 ?\r\n                                        key[0] :\r\n                                        key.slice(0, keyLength);\r\n                                }\r\n                            },\r\n                            value: {\r\n                                get() {\r\n                                    return cursor.value;\r\n                                }\r\n                            }\r\n                        });\r\n                        return virtualCursor;\r\n                    }\r\n                    return table.openCursor(translateRequest(req))\r\n                        .then(cursor => cursor && createVirtualCursor(cursor));\r\n                }\r\n            };\r\n            return result;\r\n        }\r\n    };\r\n}\r\nconst virtualIndexMiddleware = {\r\n    stack: \"dbcore\",\r\n    name: \"VirtualIndexMiddleware\",\r\n    level: 1,\r\n    create: createVirtualIndexMiddleware\r\n};\r\n\r\nfunction getObjectDiff(a, b, rv, prfx) {\r\n    rv = rv || {};\r\n    prfx = prfx || '';\r\n    keys(a).forEach((prop) => {\r\n        if (!hasOwn(b, prop)) {\r\n            rv[prfx + prop] = undefined;\r\n        }\r\n        else {\r\n            var ap = a[prop], bp = b[prop];\r\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\r\n                const apTypeName = toStringTag(ap);\r\n                const bpTypeName = toStringTag(bp);\r\n                if (apTypeName !== bpTypeName) {\r\n                    rv[prfx + prop] = b[prop];\r\n                }\r\n                else if (apTypeName === 'Object') {\r\n                    getObjectDiff(ap, bp, rv, prfx + prop + '.');\r\n                }\r\n                else if (ap !== bp) {\r\n                    rv[prfx + prop] = b[prop];\r\n                }\r\n            }\r\n            else if (ap !== bp)\r\n                rv[prfx + prop] = b[prop];\r\n        }\r\n    });\r\n    keys(b).forEach((prop) => {\r\n        if (!hasOwn(a, prop)) {\r\n            rv[prfx + prop] = b[prop];\r\n        }\r\n    });\r\n    return rv;\r\n}\r\n\r\nfunction getEffectiveKeys(primaryKey, req) {\r\n    if (req.type === 'delete')\r\n        return req.keys;\r\n    return req.keys || req.values.map(primaryKey.extractKey);\r\n}\r\n\r\nconst hooksMiddleware = {\r\n    stack: \"dbcore\",\r\n    name: \"HooksMiddleware\",\r\n    level: 2,\r\n    create: (downCore) => ({\r\n        ...downCore,\r\n        table(tableName) {\r\n            const downTable = downCore.table(tableName);\r\n            const { primaryKey } = downTable.schema;\r\n            const tableMiddleware = {\r\n                ...downTable,\r\n                mutate(req) {\r\n                    const dxTrans = PSD.trans;\r\n                    const { deleting, creating, updating } = dxTrans.table(tableName).hook;\r\n                    switch (req.type) {\r\n                        case 'add':\r\n                            if (creating.fire === nop)\r\n                                break;\r\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\r\n                        case 'put':\r\n                            if (creating.fire === nop && updating.fire === nop)\r\n                                break;\r\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\r\n                        case 'delete':\r\n                            if (deleting.fire === nop)\r\n                                break;\r\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\r\n                        case 'deleteRange':\r\n                            if (deleting.fire === nop)\r\n                                break;\r\n                            return dxTrans._promise('readwrite', () => deleteRange(req), true);\r\n                    }\r\n                    return downTable.mutate(req);\r\n                    function addPutOrDelete(req) {\r\n                        const dxTrans = PSD.trans;\r\n                        const keys = req.keys || getEffectiveKeys(primaryKey, req);\r\n                        if (!keys)\r\n                            throw new Error(\"Keys missing\");\r\n                        req = req.type === 'add' || req.type === 'put' ?\r\n                            { ...req, keys } :\r\n                            { ...req };\r\n                        if (req.type !== 'delete')\r\n                            req.values = [...req.values];\r\n                        if (req.keys)\r\n                            req.keys = [...req.keys];\r\n                        return getExistingValues(downTable, req, keys).then(existingValues => {\r\n                            const contexts = keys.map((key, i) => {\r\n                                const existingValue = existingValues[i];\r\n                                const ctx = { onerror: null, onsuccess: null };\r\n                                if (req.type === 'delete') {\r\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\r\n                                }\r\n                                else if (req.type === 'add' || existingValue === undefined) {\r\n                                    const generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\r\n                                    if (key == null && generatedPrimaryKey != null) {\r\n                                        key = generatedPrimaryKey;\r\n                                        req.keys[i] = key;\r\n                                        if (!primaryKey.outbound) {\r\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    const objectDiff = getObjectDiff(existingValue, req.values[i]);\r\n                                    const additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\r\n                                    if (additionalChanges) {\r\n                                        const requestedValue = req.values[i];\r\n                                        Object.keys(additionalChanges).forEach(keyPath => {\r\n                                            if (hasOwn(requestedValue, keyPath)) {\r\n                                                requestedValue[keyPath] = additionalChanges[keyPath];\r\n                                            }\r\n                                            else {\r\n                                                setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                }\r\n                                return ctx;\r\n                            });\r\n                            return downTable.mutate(req).then(({ failures, results, numFailures, lastResult }) => {\r\n                                for (let i = 0; i < keys.length; ++i) {\r\n                                    const primKey = results ? results[i] : keys[i];\r\n                                    const ctx = contexts[i];\r\n                                    if (primKey == null) {\r\n                                        ctx.onerror && ctx.onerror(failures[i]);\r\n                                    }\r\n                                    else {\r\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\r\n                                            req.values[i] :\r\n                                            primKey\r\n                                        );\r\n                                    }\r\n                                }\r\n                                return { failures, results, numFailures, lastResult };\r\n                            }).catch(error => {\r\n                                contexts.forEach(ctx => ctx.onerror && ctx.onerror(error));\r\n                                return Promise.reject(error);\r\n                            });\r\n                        });\r\n                    }\r\n                    function deleteRange(req) {\r\n                        return deleteNextChunk(req.trans, req.range, 10000);\r\n                    }\r\n                    function deleteNextChunk(trans, range, limit) {\r\n                        return downTable.query({ trans, values: false, query: { index: primaryKey, range }, limit })\r\n                            .then(({ result }) => {\r\n                            return addPutOrDelete({ type: 'delete', keys: result, trans }).then(res => {\r\n                                if (res.numFailures > 0)\r\n                                    return Promise.reject(res.failures[0]);\r\n                                if (result.length < limit) {\r\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\r\n                                }\r\n                                else {\r\n                                    return deleteNextChunk(trans, { ...range, lower: result[result.length - 1], lowerOpen: true }, limit);\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            return tableMiddleware;\r\n        },\r\n    })\r\n};\r\nfunction getExistingValues(table, req, effectiveKeys) {\r\n    return req.type === \"add\"\r\n        ? Promise.resolve([])\r\n        : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\r\n}\r\n\r\nfunction getFromTransactionCache(keys, cache, clone) {\r\n    try {\r\n        if (!cache)\r\n            return null;\r\n        if (cache.keys.length < keys.length)\r\n            return null;\r\n        const result = [];\r\n        for (let i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\r\n            if (cmp(cache.keys[i], keys[j]) !== 0)\r\n                continue;\r\n            result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\r\n            ++j;\r\n        }\r\n        return result.length === keys.length ? result : null;\r\n    }\r\n    catch (_a) {\r\n        return null;\r\n    }\r\n}\r\nconst cacheExistingValuesMiddleware = {\r\n    stack: \"dbcore\",\r\n    level: -1,\r\n    create: (core) => {\r\n        return {\r\n            table: (tableName) => {\r\n                const table = core.table(tableName);\r\n                return {\r\n                    ...table,\r\n                    getMany: (req) => {\r\n                        if (!req.cache) {\r\n                            return table.getMany(req);\r\n                        }\r\n                        const cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\r\n                        if (cachedResult) {\r\n                            return DexiePromise.resolve(cachedResult);\r\n                        }\r\n                        return table.getMany(req).then((res) => {\r\n                            req.trans[\"_cache\"] = {\r\n                                keys: req.keys,\r\n                                values: req.cache === \"clone\" ? deepClone(res) : res,\r\n                            };\r\n                            return res;\r\n                        });\r\n                    },\r\n                    mutate: (req) => {\r\n                        if (req.type !== \"add\")\r\n                            req.trans[\"_cache\"] = null;\r\n                        return table.mutate(req);\r\n                    },\r\n                };\r\n            },\r\n        };\r\n    },\r\n};\r\n\r\nfunction isEmptyRange(node) {\r\n    return !(\"from\" in node);\r\n}\r\nconst RangeSet = function (fromOrTree, to) {\r\n    if (this) {\r\n        extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\r\n    }\r\n    else {\r\n        const rv = new RangeSet();\r\n        if (fromOrTree && (\"d\" in fromOrTree)) {\r\n            extend(rv, fromOrTree);\r\n        }\r\n        return rv;\r\n    }\r\n};\r\nprops(RangeSet.prototype, {\r\n    add(rangeSet) {\r\n        mergeRanges(this, rangeSet);\r\n        return this;\r\n    },\r\n    addKey(key) {\r\n        addRange(this, key, key);\r\n        return this;\r\n    },\r\n    addKeys(keys) {\r\n        keys.forEach(key => addRange(this, key, key));\r\n        return this;\r\n    },\r\n    [iteratorSymbol]() {\r\n        return getRangeSetIterator(this);\r\n    }\r\n});\r\nfunction addRange(target, from, to) {\r\n    const diff = cmp(from, to);\r\n    if (isNaN(diff))\r\n        return;\r\n    if (diff > 0)\r\n        throw RangeError();\r\n    if (isEmptyRange(target))\r\n        return extend(target, { from, to, d: 1 });\r\n    const left = target.l;\r\n    const right = target.r;\r\n    if (cmp(to, target.from) < 0) {\r\n        left\r\n            ? addRange(left, from, to)\r\n            : (target.l = { from, to, d: 1, l: null, r: null });\r\n        return rebalance(target);\r\n    }\r\n    if (cmp(from, target.to) > 0) {\r\n        right\r\n            ? addRange(right, from, to)\r\n            : (target.r = { from, to, d: 1, l: null, r: null });\r\n        return rebalance(target);\r\n    }\r\n    if (cmp(from, target.from) < 0) {\r\n        target.from = from;\r\n        target.l = null;\r\n        target.d = right ? right.d + 1 : 1;\r\n    }\r\n    if (cmp(to, target.to) > 0) {\r\n        target.to = to;\r\n        target.r = null;\r\n        target.d = target.l ? target.l.d + 1 : 1;\r\n    }\r\n    const rightWasCutOff = !target.r;\r\n    if (left && !target.l) {\r\n        mergeRanges(target, left);\r\n    }\r\n    if (right && rightWasCutOff) {\r\n        mergeRanges(target, right);\r\n    }\r\n}\r\nfunction mergeRanges(target, newSet) {\r\n    function _addRangeSet(target, { from, to, l, r }) {\r\n        addRange(target, from, to);\r\n        if (l)\r\n            _addRangeSet(target, l);\r\n        if (r)\r\n            _addRangeSet(target, r);\r\n    }\r\n    if (!isEmptyRange(newSet))\r\n        _addRangeSet(target, newSet);\r\n}\r\nfunction rangesOverlap(rangeSet1, rangeSet2) {\r\n    const i1 = getRangeSetIterator(rangeSet2);\r\n    let nextResult1 = i1.next();\r\n    if (nextResult1.done)\r\n        return false;\r\n    let a = nextResult1.value;\r\n    const i2 = getRangeSetIterator(rangeSet1);\r\n    let nextResult2 = i2.next(a.from);\r\n    let b = nextResult2.value;\r\n    while (!nextResult1.done && !nextResult2.done) {\r\n        if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\r\n            return true;\r\n        cmp(a.from, b.from) < 0\r\n            ? (a = (nextResult1 = i1.next(b.from)).value)\r\n            : (b = (nextResult2 = i2.next(a.from)).value);\r\n    }\r\n    return false;\r\n}\r\nfunction getRangeSetIterator(node) {\r\n    let state = isEmptyRange(node) ? null : { s: 0, n: node };\r\n    return {\r\n        next(key) {\r\n            const keyProvided = arguments.length > 0;\r\n            while (state) {\r\n                switch (state.s) {\r\n                    case 0:\r\n                        state.s = 1;\r\n                        if (keyProvided) {\r\n                            while (state.n.l && cmp(key, state.n.from) < 0)\r\n                                state = { up: state, n: state.n.l, s: 1 };\r\n                        }\r\n                        else {\r\n                            while (state.n.l)\r\n                                state = { up: state, n: state.n.l, s: 1 };\r\n                        }\r\n                    case 1:\r\n                        state.s = 2;\r\n                        if (!keyProvided || cmp(key, state.n.to) <= 0)\r\n                            return { value: state.n, done: false };\r\n                    case 2:\r\n                        if (state.n.r) {\r\n                            state.s = 3;\r\n                            state = { up: state, n: state.n.r, s: 0 };\r\n                            continue;\r\n                        }\r\n                    case 3:\r\n                        state = state.up;\r\n                }\r\n            }\r\n            return { done: true };\r\n        },\r\n    };\r\n}\r\nfunction rebalance(target) {\r\n    var _a, _b;\r\n    const diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\r\n    const r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\r\n    if (r) {\r\n        const l = r === \"r\" ? \"l\" : \"r\";\r\n        const rootClone = { ...target };\r\n        const oldRootRight = target[r];\r\n        target.from = oldRootRight.from;\r\n        target.to = oldRootRight.to;\r\n        target[r] = oldRootRight[r];\r\n        rootClone[r] = oldRootRight[l];\r\n        target[l] = rootClone;\r\n        rootClone.d = computeDepth(rootClone);\r\n    }\r\n    target.d = computeDepth(target);\r\n}\r\nfunction computeDepth({ r, l }) {\r\n    return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\r\n}\r\n\r\nconst observabilityMiddleware = {\r\n    stack: \"dbcore\",\r\n    level: 0,\r\n    create: (core) => {\r\n        const dbName = core.schema.name;\r\n        const FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\r\n        return {\r\n            ...core,\r\n            table: (tableName) => {\r\n                const table = core.table(tableName);\r\n                const { schema } = table;\r\n                const { primaryKey } = schema;\r\n                const { extractKey, outbound } = primaryKey;\r\n                const tableClone = {\r\n                    ...table,\r\n                    mutate: (req) => {\r\n                        const trans = req.trans;\r\n                        const mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\r\n                        const getRangeSet = (indexName) => {\r\n                            const part = `idb://${dbName}/${tableName}/${indexName}`;\r\n                            return (mutatedParts[part] ||\r\n                                (mutatedParts[part] = new RangeSet()));\r\n                        };\r\n                        const pkRangeSet = getRangeSet(\"\");\r\n                        const delsRangeSet = getRangeSet(\":dels\");\r\n                        const { type } = req;\r\n                        let [keys, newObjs] = req.type === \"deleteRange\"\r\n                            ? [req.range]\r\n                            : req.type === \"delete\"\r\n                                ? [req.keys]\r\n                                : req.values.length < 50\r\n                                    ? [[], req.values]\r\n                                    : [];\r\n                        const oldCache = req.trans[\"_cache\"];\r\n                        return table.mutate(req).then((res) => {\r\n                            if (isArray(keys)) {\r\n                                if (type !== \"delete\")\r\n                                    keys = res.results;\r\n                                pkRangeSet.addKeys(keys);\r\n                                const oldObjs = getFromTransactionCache(keys, oldCache);\r\n                                if (!oldObjs && type !== \"add\") {\r\n                                    delsRangeSet.addKeys(keys);\r\n                                }\r\n                                if (oldObjs || newObjs) {\r\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\r\n                                }\r\n                            }\r\n                            else if (keys) {\r\n                                const range = { from: keys.lower, to: keys.upper };\r\n                                delsRangeSet.add(range);\r\n                                pkRangeSet.add(range);\r\n                            }\r\n                            else {\r\n                                pkRangeSet.add(FULL_RANGE);\r\n                                delsRangeSet.add(FULL_RANGE);\r\n                                schema.indexes.forEach(idx => getRangeSet(idx.name).add(FULL_RANGE));\r\n                            }\r\n                            return res;\r\n                        });\r\n                    },\r\n                };\r\n                const getRange = ({ query: { index, range }, }) => {\r\n                    var _a, _b;\r\n                    return [\r\n                        index,\r\n                        new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY),\r\n                    ];\r\n                };\r\n                const readSubscribers = {\r\n                    get: (req) => [primaryKey, new RangeSet(req.key)],\r\n                    getMany: (req) => [primaryKey, new RangeSet().addKeys(req.keys)],\r\n                    count: getRange,\r\n                    query: getRange,\r\n                    openCursor: getRange,\r\n                };\r\n                keys(readSubscribers).forEach(method => {\r\n                    tableClone[method] = function (req) {\r\n                        const { subscr } = PSD;\r\n                        if (subscr) {\r\n                            const getRangeSet = (indexName) => {\r\n                                const part = `idb://${dbName}/${tableName}/${indexName}`;\r\n                                return (subscr[part] ||\r\n                                    (subscr[part] = new RangeSet()));\r\n                            };\r\n                            const pkRangeSet = getRangeSet(\"\");\r\n                            const delsRangeSet = getRangeSet(\":dels\");\r\n                            const [queriedIndex, queriedRanges] = readSubscribers[method](req);\r\n                            getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\r\n                            if (!queriedIndex.isPrimaryKey) {\r\n                                if (method === \"count\") {\r\n                                    delsRangeSet.add(FULL_RANGE);\r\n                                }\r\n                                else {\r\n                                    const keysPromise = method === \"query\" &&\r\n                                        outbound &&\r\n                                        req.values &&\r\n                                        table.query({\r\n                                            ...req,\r\n                                            values: false,\r\n                                        });\r\n                                    return table[method].apply(this, arguments).then((res) => {\r\n                                        if (method === \"query\") {\r\n                                            if (outbound && req.values) {\r\n                                                return keysPromise.then(({ result: resultingKeys }) => {\r\n                                                    pkRangeSet.addKeys(resultingKeys);\r\n                                                    return res;\r\n                                                });\r\n                                            }\r\n                                            const pKeys = req.values\r\n                                                ? res.result.map(extractKey)\r\n                                                : res.result;\r\n                                            if (req.values) {\r\n                                                pkRangeSet.addKeys(pKeys);\r\n                                            }\r\n                                            else {\r\n                                                delsRangeSet.addKeys(pKeys);\r\n                                            }\r\n                                        }\r\n                                        else if (method === \"openCursor\") {\r\n                                            const cursor = res;\r\n                                            const wantValues = req.values;\r\n                                            return (cursor &&\r\n                                                Object.create(cursor, {\r\n                                                    key: {\r\n                                                        get() {\r\n                                                            delsRangeSet.addKey(cursor.primaryKey);\r\n                                                            return cursor.key;\r\n                                                        },\r\n                                                    },\r\n                                                    primaryKey: {\r\n                                                        get() {\r\n                                                            const pkey = cursor.primaryKey;\r\n                                                            delsRangeSet.addKey(pkey);\r\n                                                            return pkey;\r\n                                                        },\r\n                                                    },\r\n                                                    value: {\r\n                                                        get() {\r\n                                                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\r\n                                                            return cursor.value;\r\n                                                        },\r\n                                                    },\r\n                                                }));\r\n                                        }\r\n                                        return res;\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                        return table[method].apply(this, arguments);\r\n                    };\r\n                });\r\n                return tableClone;\r\n            },\r\n        };\r\n    },\r\n};\r\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\r\n    function addAffectedIndex(ix) {\r\n        const rangeSet = getRangeSet(ix.name || \"\");\r\n        function extractKey(obj) {\r\n            return obj != null ? ix.extractKey(obj) : null;\r\n        }\r\n        const addKeyOrKeys = (key) => ix.multiEntry && isArray(key)\r\n            ? key.forEach(key => rangeSet.addKey(key))\r\n            : rangeSet.addKey(key);\r\n        (oldObjs || newObjs).forEach((_, i) => {\r\n            const oldKey = oldObjs && extractKey(oldObjs[i]);\r\n            const newKey = newObjs && extractKey(newObjs[i]);\r\n            if (cmp(oldKey, newKey) !== 0) {\r\n                if (oldKey != null)\r\n                    addKeyOrKeys(oldKey);\r\n                if (newKey != null)\r\n                    addKeyOrKeys(newKey);\r\n            }\r\n        });\r\n    }\r\n    schema.indexes.forEach(addAffectedIndex);\r\n}\r\n\r\nclass Dexie$1 {\r\n    constructor(name, options) {\r\n        this._middlewares = {};\r\n        this.verno = 0;\r\n        const deps = Dexie$1.dependencies;\r\n        this._options = options = {\r\n            addons: Dexie$1.addons,\r\n            autoOpen: true,\r\n            indexedDB: deps.indexedDB,\r\n            IDBKeyRange: deps.IDBKeyRange,\r\n            ...options\r\n        };\r\n        this._deps = {\r\n            indexedDB: options.indexedDB,\r\n            IDBKeyRange: options.IDBKeyRange\r\n        };\r\n        const { addons, } = options;\r\n        this._dbSchema = {};\r\n        this._versions = [];\r\n        this._storeNames = [];\r\n        this._allTables = {};\r\n        this.idbdb = null;\r\n        this._novip = this;\r\n        const state = {\r\n            dbOpenError: null,\r\n            isBeingOpened: false,\r\n            onReadyBeingFired: null,\r\n            openComplete: false,\r\n            dbReadyResolve: nop,\r\n            dbReadyPromise: null,\r\n            cancelOpen: nop,\r\n            openCanceller: null,\r\n            autoSchema: true,\r\n            PR1398_maxLoop: 3\r\n        };\r\n        state.dbReadyPromise = new DexiePromise(resolve => {\r\n            state.dbReadyResolve = resolve;\r\n        });\r\n        state.openCanceller = new DexiePromise((_, reject) => {\r\n            state.cancelOpen = reject;\r\n        });\r\n        this._state = state;\r\n        this.name = name;\r\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\r\n        this.on.ready.subscribe = override(this.on.ready.subscribe, subscribe => {\r\n            return (subscriber, bSticky) => {\r\n                Dexie$1.vip(() => {\r\n                    const state = this._state;\r\n                    if (state.openComplete) {\r\n                        if (!state.dbOpenError)\r\n                            DexiePromise.resolve().then(subscriber);\r\n                        if (bSticky)\r\n                            subscribe(subscriber);\r\n                    }\r\n                    else if (state.onReadyBeingFired) {\r\n                        state.onReadyBeingFired.push(subscriber);\r\n                        if (bSticky)\r\n                            subscribe(subscriber);\r\n                    }\r\n                    else {\r\n                        subscribe(subscriber);\r\n                        const db = this;\r\n                        if (!bSticky)\r\n                            subscribe(function unsubscribe() {\r\n                                db.on.ready.unsubscribe(subscriber);\r\n                                db.on.ready.unsubscribe(unsubscribe);\r\n                            });\r\n                    }\r\n                });\r\n            };\r\n        });\r\n        this.Collection = createCollectionConstructor(this);\r\n        this.Table = createTableConstructor(this);\r\n        this.Transaction = createTransactionConstructor(this);\r\n        this.Version = createVersionConstructor(this);\r\n        this.WhereClause = createWhereClauseConstructor(this);\r\n        this.on(\"versionchange\", ev => {\r\n            if (ev.newVersion > 0)\r\n                console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);\r\n            else\r\n                console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);\r\n            this.close();\r\n        });\r\n        this.on(\"blocked\", ev => {\r\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\r\n                console.warn(`Dexie.delete('${this.name}') was blocked`);\r\n            else\r\n                console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${ev.oldVersion / 10}`);\r\n        });\r\n        this._maxKey = getMaxKey(options.IDBKeyRange);\r\n        this._createTransaction = (mode, storeNames, dbschema, parentTransaction) => new this.Transaction(mode, storeNames, dbschema, this._options.chromeTransactionDurability, parentTransaction);\r\n        this._fireOnBlocked = ev => {\r\n            this.on(\"blocked\").fire(ev);\r\n            connections\r\n                .filter(c => c.name === this.name && c !== this && !c._state.vcFired)\r\n                .map(c => c.on(\"versionchange\").fire(ev));\r\n        };\r\n        this.use(virtualIndexMiddleware);\r\n        this.use(hooksMiddleware);\r\n        this.use(observabilityMiddleware);\r\n        this.use(cacheExistingValuesMiddleware);\r\n        this.vip = Object.create(this, { _vip: { value: true } });\r\n        addons.forEach(addon => addon(this));\r\n    }\r\n    version(versionNumber) {\r\n        if (isNaN(versionNumber) || versionNumber < 0.1)\r\n            throw new exceptions.Type(`Given version is not a positive number`);\r\n        versionNumber = Math.round(versionNumber * 10) / 10;\r\n        if (this.idbdb || this._state.isBeingOpened)\r\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\r\n        this.verno = Math.max(this.verno, versionNumber);\r\n        const versions = this._versions;\r\n        var versionInstance = versions.filter(v => v._cfg.version === versionNumber)[0];\r\n        if (versionInstance)\r\n            return versionInstance;\r\n        versionInstance = new this.Version(versionNumber);\r\n        versions.push(versionInstance);\r\n        versions.sort(lowerVersionFirst);\r\n        versionInstance.stores({});\r\n        this._state.autoSchema = false;\r\n        return versionInstance;\r\n    }\r\n    _whenReady(fn) {\r\n        return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise((resolve, reject) => {\r\n            if (this._state.openComplete) {\r\n                return reject(new exceptions.DatabaseClosed(this._state.dbOpenError));\r\n            }\r\n            if (!this._state.isBeingOpened) {\r\n                if (!this._options.autoOpen) {\r\n                    reject(new exceptions.DatabaseClosed());\r\n                    return;\r\n                }\r\n                this.open().catch(nop);\r\n            }\r\n            this._state.dbReadyPromise.then(resolve, reject);\r\n        }).then(fn);\r\n    }\r\n    use({ stack, create, level, name }) {\r\n        if (name)\r\n            this.unuse({ stack, name });\r\n        const middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\r\n        middlewares.push({ stack, create, level: level == null ? 10 : level, name });\r\n        middlewares.sort((a, b) => a.level - b.level);\r\n        return this;\r\n    }\r\n    unuse({ stack, name, create }) {\r\n        if (stack && this._middlewares[stack]) {\r\n            this._middlewares[stack] = this._middlewares[stack].filter(mw => create ? mw.create !== create :\r\n                name ? mw.name !== name :\r\n                    false);\r\n        }\r\n        return this;\r\n    }\r\n    open() {\r\n        return dexieOpen(this);\r\n    }\r\n    _close() {\r\n        const state = this._state;\r\n        const idx = connections.indexOf(this);\r\n        if (idx >= 0)\r\n            connections.splice(idx, 1);\r\n        if (this.idbdb) {\r\n            try {\r\n                this.idbdb.close();\r\n            }\r\n            catch (e) { }\r\n            this._novip.idbdb = null;\r\n        }\r\n        state.dbReadyPromise = new DexiePromise(resolve => {\r\n            state.dbReadyResolve = resolve;\r\n        });\r\n        state.openCanceller = new DexiePromise((_, reject) => {\r\n            state.cancelOpen = reject;\r\n        });\r\n    }\r\n    close() {\r\n        this._close();\r\n        const state = this._state;\r\n        this._options.autoOpen = false;\r\n        state.dbOpenError = new exceptions.DatabaseClosed();\r\n        if (state.isBeingOpened)\r\n            state.cancelOpen(state.dbOpenError);\r\n    }\r\n    delete() {\r\n        const hasArguments = arguments.length > 0;\r\n        const state = this._state;\r\n        return new DexiePromise((resolve, reject) => {\r\n            const doDelete = () => {\r\n                this.close();\r\n                var req = this._deps.indexedDB.deleteDatabase(this.name);\r\n                req.onsuccess = wrap(() => {\r\n                    _onDatabaseDeleted(this._deps, this.name);\r\n                    resolve();\r\n                });\r\n                req.onerror = eventRejectHandler(reject);\r\n                req.onblocked = this._fireOnBlocked;\r\n            };\r\n            if (hasArguments)\r\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\r\n            if (state.isBeingOpened) {\r\n                state.dbReadyPromise.then(doDelete);\r\n            }\r\n            else {\r\n                doDelete();\r\n            }\r\n        });\r\n    }\r\n    backendDB() {\r\n        return this.idbdb;\r\n    }\r\n    isOpen() {\r\n        return this.idbdb !== null;\r\n    }\r\n    hasBeenClosed() {\r\n        const dbOpenError = this._state.dbOpenError;\r\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\r\n    }\r\n    hasFailed() {\r\n        return this._state.dbOpenError !== null;\r\n    }\r\n    dynamicallyOpened() {\r\n        return this._state.autoSchema;\r\n    }\r\n    get tables() {\r\n        return keys(this._allTables).map(name => this._allTables[name]);\r\n    }\r\n    transaction() {\r\n        const args = extractTransactionArgs.apply(this, arguments);\r\n        return this._transaction.apply(this, args);\r\n    }\r\n    _transaction(mode, tables, scopeFunc) {\r\n        let parentTransaction = PSD.trans;\r\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\r\n            parentTransaction = null;\r\n        const onlyIfCompatible = mode.indexOf('?') !== -1;\r\n        mode = mode.replace('!', '').replace('?', '');\r\n        let idbMode, storeNames;\r\n        try {\r\n            storeNames = tables.map(table => {\r\n                var storeName = table instanceof this.Table ? table.name : table;\r\n                if (typeof storeName !== 'string')\r\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\r\n                return storeName;\r\n            });\r\n            if (mode == \"r\" || mode === READONLY)\r\n                idbMode = READONLY;\r\n            else if (mode == \"rw\" || mode == READWRITE)\r\n                idbMode = READWRITE;\r\n            else\r\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\r\n            if (parentTransaction) {\r\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\r\n                    if (onlyIfCompatible) {\r\n                        parentTransaction = null;\r\n                    }\r\n                    else\r\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\r\n                }\r\n                if (parentTransaction) {\r\n                    storeNames.forEach(storeName => {\r\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\r\n                            if (onlyIfCompatible) {\r\n                                parentTransaction = null;\r\n                            }\r\n                            else\r\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\r\n                                    \" not included in parent transaction.\");\r\n                        }\r\n                    });\r\n                }\r\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\r\n                    parentTransaction = null;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            return parentTransaction ?\r\n                parentTransaction._promise(null, (_, reject) => { reject(e); }) :\r\n                rejection(e);\r\n        }\r\n        const enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\r\n        return (parentTransaction ?\r\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\r\n            PSD.trans ?\r\n                usePSD(PSD.transless, () => this._whenReady(enterTransaction)) :\r\n                this._whenReady(enterTransaction));\r\n    }\r\n    table(tableName) {\r\n        if (!hasOwn(this._allTables, tableName)) {\r\n            throw new exceptions.InvalidTable(`Table ${tableName} does not exist`);\r\n        }\r\n        return this._allTables[tableName];\r\n    }\r\n}\r\n\r\nconst symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\r\n    ? Symbol.observable\r\n    : \"@@observable\";\r\nclass Observable {\r\n    constructor(subscribe) {\r\n        this._subscribe = subscribe;\r\n    }\r\n    subscribe(x, error, complete) {\r\n        return this._subscribe(!x || typeof x === \"function\" ? { next: x, error, complete } : x);\r\n    }\r\n    [symbolObservable]() {\r\n        return this;\r\n    }\r\n}\r\n\r\nfunction extendObservabilitySet(target, newSet) {\r\n    keys(newSet).forEach(part => {\r\n        const rangeSet = target[part] || (target[part] = new RangeSet());\r\n        mergeRanges(rangeSet, newSet[part]);\r\n    });\r\n    return target;\r\n}\r\n\r\nfunction liveQuery(querier) {\r\n    let hasValue = false;\r\n    let currentValue = undefined;\r\n    const observable = new Observable((observer) => {\r\n        const scopeFuncIsAsync = isAsyncFunction(querier);\r\n        function execute(subscr) {\r\n            if (scopeFuncIsAsync) {\r\n                incrementExpectedAwaits();\r\n            }\r\n            const exec = () => newScope(querier, { subscr, trans: null });\r\n            const rv = PSD.trans\r\n                ?\r\n                    usePSD(PSD.transless, exec)\r\n                : exec();\r\n            if (scopeFuncIsAsync) {\r\n                rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\r\n            }\r\n            return rv;\r\n        }\r\n        let closed = false;\r\n        let accumMuts = {};\r\n        let currentObs = {};\r\n        const subscription = {\r\n            get closed() {\r\n                return closed;\r\n            },\r\n            unsubscribe: () => {\r\n                closed = true;\r\n                globalEvents.storagemutated.unsubscribe(mutationListener);\r\n            },\r\n        };\r\n        observer.start && observer.start(subscription);\r\n        let querying = false, startedListening = false;\r\n        function shouldNotify() {\r\n            return keys(currentObs).some((key) => accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]));\r\n        }\r\n        const mutationListener = (parts) => {\r\n            extendObservabilitySet(accumMuts, parts);\r\n            if (shouldNotify()) {\r\n                doQuery();\r\n            }\r\n        };\r\n        const doQuery = () => {\r\n            if (querying || closed)\r\n                return;\r\n            accumMuts = {};\r\n            const subscr = {};\r\n            const ret = execute(subscr);\r\n            if (!startedListening) {\r\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\r\n                startedListening = true;\r\n            }\r\n            querying = true;\r\n            Promise.resolve(ret).then((result) => {\r\n                hasValue = true;\r\n                currentValue = result;\r\n                querying = false;\r\n                if (closed)\r\n                    return;\r\n                if (shouldNotify()) {\r\n                    doQuery();\r\n                }\r\n                else {\r\n                    accumMuts = {};\r\n                    currentObs = subscr;\r\n                    observer.next && observer.next(result);\r\n                }\r\n            }, (err) => {\r\n                querying = false;\r\n                hasValue = false;\r\n                observer.error && observer.error(err);\r\n                subscription.unsubscribe();\r\n            });\r\n        };\r\n        doQuery();\r\n        return subscription;\r\n    });\r\n    observable.hasValue = () => hasValue;\r\n    observable.getValue = () => currentValue;\r\n    return observable;\r\n}\r\n\r\nlet domDeps;\r\ntry {\r\n    domDeps = {\r\n        indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\r\n        IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\r\n    };\r\n}\r\ncatch (e) {\r\n    domDeps = { indexedDB: null, IDBKeyRange: null };\r\n}\r\n\r\nconst Dexie = Dexie$1;\r\nprops(Dexie, {\r\n    ...fullNameExceptions,\r\n    delete(databaseName) {\r\n        const db = new Dexie(databaseName, { addons: [] });\r\n        return db.delete();\r\n    },\r\n    exists(name) {\r\n        return new Dexie(name, { addons: [] }).open().then(db => {\r\n            db.close();\r\n            return true;\r\n        }).catch('NoSuchDatabaseError', () => false);\r\n    },\r\n    getDatabaseNames(cb) {\r\n        try {\r\n            return getDatabaseNames(Dexie.dependencies).then(cb);\r\n        }\r\n        catch (_a) {\r\n            return rejection(new exceptions.MissingAPI());\r\n        }\r\n    },\r\n    defineClass() {\r\n        function Class(content) {\r\n            extend(this, content);\r\n        }\r\n        return Class;\r\n    },\r\n    ignoreTransaction(scopeFunc) {\r\n        return PSD.trans ?\r\n            usePSD(PSD.transless, scopeFunc) :\r\n            scopeFunc();\r\n    },\r\n    vip,\r\n    async: function (generatorFn) {\r\n        return function () {\r\n            try {\r\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\r\n                if (!rv || typeof rv.then !== 'function')\r\n                    return DexiePromise.resolve(rv);\r\n                return rv;\r\n            }\r\n            catch (e) {\r\n                return rejection(e);\r\n            }\r\n        };\r\n    },\r\n    spawn: function (generatorFn, args, thiz) {\r\n        try {\r\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\r\n            if (!rv || typeof rv.then !== 'function')\r\n                return DexiePromise.resolve(rv);\r\n            return rv;\r\n        }\r\n        catch (e) {\r\n            return rejection(e);\r\n        }\r\n    },\r\n    currentTransaction: {\r\n        get: () => PSD.trans || null\r\n    },\r\n    waitFor: function (promiseOrFunction, optionalTimeout) {\r\n        const promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\r\n            Dexie.ignoreTransaction(promiseOrFunction) :\r\n            promiseOrFunction)\r\n            .timeout(optionalTimeout || 60000);\r\n        return PSD.trans ?\r\n            PSD.trans.waitFor(promise) :\r\n            promise;\r\n    },\r\n    Promise: DexiePromise,\r\n    debug: {\r\n        get: () => debug,\r\n        set: value => {\r\n            setDebug(value, value === 'dexie' ? () => true : dexieStackFrameFilter);\r\n        }\r\n    },\r\n    derive: derive,\r\n    extend: extend,\r\n    props: props,\r\n    override: override,\r\n    Events: Events,\r\n    on: globalEvents,\r\n    liveQuery,\r\n    extendObservabilitySet,\r\n    getByKeyPath: getByKeyPath,\r\n    setByKeyPath: setByKeyPath,\r\n    delByKeyPath: delByKeyPath,\r\n    shallowClone: shallowClone,\r\n    deepClone: deepClone,\r\n    getObjectDiff: getObjectDiff,\r\n    cmp,\r\n    asap: asap$1,\r\n    minKey: minKey,\r\n    addons: [],\r\n    connections: connections,\r\n    errnames: errnames,\r\n    dependencies: domDeps,\r\n    semVer: DEXIE_VERSION,\r\n    version: DEXIE_VERSION.split('.')\r\n        .map(n => parseInt(n))\r\n        .reduce((p, c, i) => p + (c / Math.pow(10, i * 2))),\r\n});\r\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\r\n\r\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\r\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, updatedParts => {\r\n        if (!propagatingLocally) {\r\n            let event;\r\n            if (isIEOrEdge) {\r\n                event = document.createEvent('CustomEvent');\r\n                event.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\r\n            }\r\n            else {\r\n                event = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\r\n                    detail: updatedParts\r\n                });\r\n            }\r\n            propagatingLocally = true;\r\n            dispatchEvent(event);\r\n            propagatingLocally = false;\r\n        }\r\n    });\r\n    addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, ({ detail }) => {\r\n        if (!propagatingLocally) {\r\n            propagateLocally(detail);\r\n        }\r\n    });\r\n}\r\nfunction propagateLocally(updateParts) {\r\n    let wasMe = propagatingLocally;\r\n    try {\r\n        propagatingLocally = true;\r\n        globalEvents.storagemutated.fire(updateParts);\r\n    }\r\n    finally {\r\n        propagatingLocally = wasMe;\r\n    }\r\n}\r\nlet propagatingLocally = false;\r\n\r\nif (typeof BroadcastChannel !== 'undefined') {\r\n    const bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\r\n    if (typeof bc.unref === 'function') {\r\n        bc.unref();\r\n    }\r\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\r\n        if (!propagatingLocally) {\r\n            bc.postMessage(changedParts);\r\n        }\r\n    });\r\n    bc.onmessage = (ev) => {\r\n        if (ev.data)\r\n            propagateLocally(ev.data);\r\n    };\r\n}\r\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\r\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\r\n        try {\r\n            if (!propagatingLocally) {\r\n                if (typeof localStorage !== 'undefined') {\r\n                    localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\r\n                        trig: Math.random(),\r\n                        changedParts,\r\n                    }));\r\n                }\r\n                if (typeof self['clients'] === 'object') {\r\n                    [...self['clients'].matchAll({ includeUncontrolled: true })].forEach((client) => client.postMessage({\r\n                        type: STORAGE_MUTATED_DOM_EVENT_NAME,\r\n                        changedParts,\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        catch (_a) { }\r\n    });\r\n    if (typeof addEventListener !== 'undefined') {\r\n        addEventListener('storage', (ev) => {\r\n            if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\r\n                const data = JSON.parse(ev.newValue);\r\n                if (data)\r\n                    propagateLocally(data.changedParts);\r\n            }\r\n        });\r\n    }\r\n    const swContainer = self.document && navigator.serviceWorker;\r\n    if (swContainer) {\r\n        swContainer.addEventListener('message', propagateMessageLocally);\r\n    }\r\n}\r\nfunction propagateMessageLocally({ data }) {\r\n    if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\r\n        propagateLocally(data.changedParts);\r\n    }\r\n}\r\n\r\nDexiePromise.rejectionMapper = mapError;\r\nsetDebug(debug, dexieStackFrameFilter);\r\n\r\nexport { Dexie$1 as Dexie, RangeSet, Dexie$1 as default, liveQuery, mergeRanges, rangesOverlap };\r\n\r\n"],
  "mappings": "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",
  "names": ["DexieError", "type", "resolve", "reject", "props", "trans", "keys", "i", "args", "Table", "count", "ctx", "Collection", "cmp", "direction", "addRange", "ranges", "WhereClause", "indexedDB", "p", "Transaction", "db", "tables", "keyPath", "compound", "result", "req", "openCursor", "query", "ev", "hasGetAll", "Version", "primaryKey", "dxTrans", "target", "key", "state"]
}
